(self.webpackChunkxpert_ai=self.webpackChunkxpert_ai||[]).push([[9226],{"./packages/angular/parameter/parameter/parameter.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  overflow: hidden;\n  padding: 0.25rem;\n}\n\n.mat-mdc-radio-group .mat-mdc-radio-button {\n  margin: 0.5rem 0;\n}\n.mat-mdc-radio-group.ngm-density__cosy .mat-mdc-radio-button {\n  margin: 0.3rem 0;\n}\n.mat-mdc-radio-group.ngm-density__compact .mat-mdc-radio-button {\n  margin: 0;\n}\n\n.mat-mdc-slider {\n  width: calc(100% - 30px);\n  margin-left: auto;\n  margin-right: auto;\n  display: block;\n}\n\n.mat-mdc-slider-thumb-label-showing.mat-mdc-slider-horizontal {\n  margin-top: 1rem;\n  margin-left: 1rem;\n  margin-right: 1rem;\n}\n.mat-mdc-slider-thumb-label-showing.mat-mdc-slider-vertical {\n  margin-left: 1rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n\n.mat-mdc-radio-group {\n  margin-left: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/advanced-filter/advanced-filter.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".pac-filter-tree {\n  display: flex;\n}\n\n.pac-filter-legend {\n  display: flex;\n  margin-left: auto;\n  pointer-events: none;\n}\n\n.mat-dialog-title {\n  display: flex;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/advanced-slicer/advanced-slicer.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n  width: 24rem;\n  overflow: hidden;\n}\n\n.ngm-advanced-slicer__context {\n  padding-bottom: 1.34375em;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicer-bar/slicer-bar.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicer/slicer.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: block;\n}\n:host .mat-chip-list {\n  display: block;\n}\n:host .ngm-slicer__remove {\n  opacity: 0;\n}\n:host:hover .ngm-slicer__remove {\n  opacity: 1;\n}\n:host .ngm-slicer__label {\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.mat-mdc-chip.mat-mdc-standard-chip {\n  --mdc-chip-container-height: auto;\n}\n\n:host::ng-deep .mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,\n:host::ng-deep .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,\n:host::ng-deep .mat-mdc-standard-chip .mat-mdc-chip-action-label {\n  overflow: hidden;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/slicers/slicers.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n\n.mat-divider {\n  margin: 0.5rem 0;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host .mat-expansion-panel-header-description {\n  justify-content: flex-end;\n  margin-right: 0;\n}\n:host .ngm-timer-editor__header {\n  display: flex;\n  justify-content: space-between;\n}\n\n.mat-expansion-panel-header {\n  padding-right: 0px;\n}\n\n.ngm-timer-editor__add {\n  margin-top: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/parameter/parameter.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>NgmParameterModule});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/parameter/parameter-select/parameter-select.component.ts"),_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/parameter/parameter/parameter.component.ts"),_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/parameter/parameter-create/parameter-create.component.ts");let NgmParameterModule=class NgmParameterModule{};NgmParameterModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__.N,_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__.r,_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__.b],exports:[_parameter_parameter_component__WEBPACK_IMPORTED_MODULE_2__.N,_parameter_create_parameter_create_component__WEBPACK_IMPORTED_MODULE_3__.r,_parameter_select_parameter_select_component__WEBPACK_IMPORTED_MODULE_4__.b],declarations:[],providers:[]})],NgmParameterModule)},"./packages/angular/parameter/parameter/parameter.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>NgmParameterComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var parameter_componentngResource=__webpack_require__("./packages/angular/parameter/parameter/parameter.component.scss?ngResource"),parameter_componentngResource_default=__webpack_require__.n(parameter_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),list=__webpack_require__("./node_modules/@angular/material/fesm2022/list.mjs"),fesm2022_radio=__webpack_require__("./node_modules/@angular/material/fesm2022/radio.mjs"),slider=__webpack_require__("./node_modules/@angular/material/fesm2022/slider.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),controls_module=__webpack_require__("./packages/angular/controls/controls.module.ts"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),core_module=__webpack_require__("./packages/angular/core/core.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");let NgmParameterComponent=class NgmParameterComponent{constructor(){this.ParameterControlEnum=src.Yvx,this.dsCoreService=(0,core.inject)(core_service.g),this.dataSettings$=new BehaviorSubject.t(null),this.parameter$=new BehaviorSubject.t(null),this.parameterChange=new core.EventEmitter,this.dataSource$=this.dataSettings$.pipe((0,map.T)((dataSettings=>dataSettings?.dataSource)),(0,filter.p)((value=>!!value)),(0,distinctUntilChanged.F)(),(0,switchMap.n)((dataSource=>this.dsCoreService.getDataSource(dataSource)))),this.dimension$=this.parameter$.pipe((0,filter.p)((value=>!!value?.dimension)),(0,map.T)((parameter=>(0,src.UpN)(parameter,"dimension","hierarchy"))),(0,distinctUntilChanged.F)(src.n4T)),this.members$=this.dimension$.pipe((0,combineLatestWith.v)(this.dataSettings$.pipe((0,map.T)((dataSettings=>dataSettings?.entitySet)),(0,filter.p)((value=>!!value)),(0,distinctUntilChanged.F)()),this.dataSource$),(0,switchMap.n)((([parameter,entity,dataSource])=>dataSource.discoverMDMembers(entity,parameter))),(0,map.T)((members=>members?.map((item=>({key:item.memberKey,value:item.memberKey,caption:item.memberCaption})))))),this.availableMembers$=this.parameter$.pipe((0,map.T)((parameter=>parameter?.availableMembers)),(0,distinctUntilChanged.F)(),(0,switchMap.n)((availableMembers=>availableMembers?.length?(0,of.of)(availableMembers):this.members$))),this.variableProperty=(0,rxjs_interop.ot)(this.parameter$.pipe((0,map.T)((parameter=>(0,src.IXq)(parameter)?parameter:null)))),this.slicer={},this.parameterValue=null,this.changeParameter$=new Subject.B,this.changeSub=this.changeParameter$.pipe((0,debounceTime.B)(500),(0,rxjs_interop.pQ)()).subscribe((()=>this.parameterChange.emit(this.parameter)))}get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}get parameter(){return this.parameter$.value}set parameter(value){this.parameter$.next(value)}get multiple(){return this.options?.selectionType===src.dDN.Multiple}get paramType(){return this.parameter?.paramType}get availableMembers(){return this.parameter?.availableMembers??[]}get members(){return this.parameter.members}set members(members){(0,src.n4T)(members,this.parameter.members)||(this.parameter={...this.parameter,members},this.changeParameter())}ngOnChanges({parameter}){parameter&&(this.parameterValue=parameter.currentValue?.value)}compareWith(a,b){return a.value===b.value}updateParameterValue(event){this.parameter={...this.parameter,value:event},this.changeParameter()}changeParameter(){this.changeParameter$.next()}onSlicerChange(slicer){this.updateParameterValue(slicer.members)}onSlicerEnd(event){this.updateParameterValue(event.value)}onBlur(event){this.updateParameterValue(event.target.value)}static#_=this.propDecorators={dataSettings:[{type:core.Input}],parameter:[{type:core.Input}],displayBehaviour:[{type:core.Input}],options:[{type:core.Input}],appearance:[{type:core.Input}],parameterChange:[{type:core.Output}]}};NgmParameterComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.YN,fesm2022_forms.X1,form_field.RG,input.fS,fesm2022_radio.Wk,list.Fg,slider.Ez,core_module.T,common_module.y,controls_module.N],changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-parameter",template:'@switch (paramType) {\n  @case(ParameterControlEnum.Input) {\n    @if (options?.slider) {\n        <mat-slider class="w-full"\n            [step]="options?.sliderStep || 1"\n            [min]="options?.sliderMin || 0"\n            [max]="options?.sliderMax || 100"\n            [discrete]="options?.showThumbLabel"\n            [showTickMarks]="options?.showTickMarks"\n            [color]="options?.sliderColor"\n            >\n            <input matSliderThumb [(ngModel)]="parameterValue" (dragEnd)="onSlicerEnd($event)">\n        </mat-slider>\n    } @else {\n        <ngm-input class="block w-full px-2" [(ngModel)]="parameterValue" [type]="parameter.dataType ?? \'string\'"\n        (blur)="onBlur($event)"\n        />\n    }\n  }\n  @case(ParameterControlEnum.Select) {\n    <mat-radio-group class="flex-1 flex flex-col justify-start items-start"\n        [displayDensity]="appearance?.displayDensity"\n        [ngModel]="$any(parameter.members?.[0])?.value"\n        (ngModelChange)="updateParameterValue($event)"\n    >\n        <mat-radio-button *ngFor="let option of parameter.availableMembers"\n            [value]="option.value">{{ option.label }}</mat-radio-button>\n    </mat-radio-group>\n  }\n  @case(ParameterControlEnum.Dimensions) {\n    \x3c!-- 暂时先用简易版:平铺展示维度成员 --\x3e\n    @if (multiple) {\n        <mat-selection-list class="flex-1"\n            [multiple]="true"\n            [displayDensity]="appearance?.displayDensity"\n            [compareWith]="compareWith"\n            [(ngModel)]="members"\n        >\n            <mat-list-option *ngFor="let availableMember of availableMembers$ | async" [value]="availableMember">\n                <ngm-display-behaviour [option]="availableMember" [displayBehaviour]="displayBehaviour"></ngm-display-behaviour>\n            </mat-list-option>\n        </mat-selection-list>\n    }@else {\n        <mat-selection-list class="flex-1"\n            [multiple]="false"\n            [displayDensity]="appearance?.displayDensity"\n            [compareWith]="compareWith"\n            [(ngModel)]="members"\n        >\n            <mat-list-option *ngFor="let availableMember of availableMembers$ | async" [value]="availableMember">\n                <ngm-display-behaviour [option]="availableMember" [displayBehaviour]="displayBehaviour"></ngm-display-behaviour>\n            </mat-list-option>\n        </mat-selection-list>\n    }\n  }\n}\n\n\x3c!-- todo dimension$ change to referenceDimension --\x3e\n@if (variableProperty()?.referenceDimension) {\n  <ngm-member-tree class="flex-1"\n    [dataSettings]="dataSettings"\n    [dimension]="dimension$ | async"\n    [options]="options"\n    [ngModel]="slicer"\n    (ngModelChange)="onSlicerChange($event)"\n  />\n}\n',host:{class:"ngm-parameter"},styles:[parameter_componentngResource_default()]})],NgmParameterComponent)},"./packages/angular/selection/advanced-filter/advanced-filter.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A1:()=>NgmAdvancedFilterComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var advanced_filter_componentngResource=__webpack_require__("./packages/angular/selection/advanced-filter/advanced-filter.component.scss?ngResource"),advanced_filter_componentngResource_default=__webpack_require__.n(advanced_filter_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),value_help_component=__webpack_require__("./packages/angular/controls/value-help/value-help.component.ts"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),types=__webpack_require__("./packages/angular/entity/types.ts"),property_select_component=__webpack_require__("./packages/angular/entity/property-select/property-select.component.ts");class ExpressionItem{constructor(parent){this.parent=parent}}class ExpressionGroupItem extends ExpressionItem{constructor(operator,parent){super(parent),this.operator=operator,this.children=[]}}class ExpressionOperandItem extends ExpressionItem{constructor(expression,parent){super(parent),this.expression=expression}}let NgmAdvancedFilterComponent=class NgmAdvancedFilterComponent{constructor(cdr,dialog,_viewContainerRef,data,dialogRef){this.cdr=cdr,this.dialog=dialog,this._viewContainerRef=_viewContainerRef,this.data=data,this.dialogRef=dialogRef,this.isDialogContainer=!0,this.PropertyCapacity=types.w,this.DISPLAY_BEHAVIOUR=src.Y$2,this.FilterOperator=src.tlN,this.selectedExpressions=[],this.selectedGroups=[],this._dblClickDelay=200,this._preventChipClick=!1}ngOnInit(){this.entityType=this.data.entityType,this.syntax=this.data.syntax,this.data?.advancedFilter&&(this.rootGroup=convertFilter2ExpressionItem(this.data.advancedFilter,null),this.currentGroup=this.rootGroup),this.syntax===src.w4h.MDX?this.operators=function getMDXOperators(){return[src.tlN.EQ,src.tlN.NE].map((o=>({value:o,label:src.cDT[o]})))}():this.operators=function getAllOperators(){return[src.tlN.EQ,src.tlN.NE,src.tlN.BT,src.tlN.GT,src.tlN.GE,src.tlN.LT,src.tlN.LE].map((o=>({value:o,label:src.cDT[o]})))}()}get selectedDimension(){return this._selectedDimension}set selectedDimension(value){this._selectedDimension=value}get filterableColumns(){return(0,src.Jwe)(this.entityType)}getEntityProperty(name){return(0,src.jZc)(this.entityType,name)}addCondition(parent,afterExpression){this.cancelOperandAdd();const operandItem=new ExpressionOperandItem({dimension:null,operator:null,and:!0,members:null},parent);if(afterExpression){const index=parent.children.indexOf(afterExpression);parent.children.splice(index+1,0,operandItem)}else parent.children.push(operandItem);this.enterExpressionEdit(operandItem)}addAndGroup(parent,afterExpression){this.addGroup(src.t_k.And,parent,afterExpression)}addOrGroup(parent,afterExpression){this.addGroup(src.t_k.Or,parent,afterExpression)}endGroup(groupItem){this.currentGroup=groupItem.parent}commitOperandEdit(){this.editedExpression&&(this.editedExpression.expression.dimension=this.selectedDimension,this.editedExpression.expression.operator=this.selectedCondition,this.editedExpression.expression.members=[{key:this.searchValue,value:this.searchValue}],this.editedExpression.expression.operator!==src.tlN.BT||(0,src.gD_)(this.highValue)||this.editedExpression.expression.members.push({key:this.highValue,value:this.highValue}),this.editedExpression.inEditMode=!1,this.editedExpression=null)}cancelOperandAdd(){this.addModeExpression&&(this.addModeExpression.inAddMode=!1,this.addModeExpression=null)}cancelOperandEdit(){this.editedExpression&&(this.editedExpression.inEditMode=!1,this.editedExpression.expression.dimension||this.deleteItem(this.editedExpression),this.editedExpression=null)}operandCanBeCommitted(){return this.selectedDimension&&this.selectedCondition&&!!this.searchValue}exitOperandEdit(){this.editedExpression&&(this.operandCanBeCommitted()?this.commitOperandEdit():this.cancelOperandEdit())}isExpressionGroup(expression){return expression instanceof ExpressionGroupItem}addGroup(operator,parent,afterExpression){this.cancelOperandAdd();const groupItem=new ExpressionGroupItem(operator,parent);if(parent)if(afterExpression){const index=parent.children.indexOf(afterExpression);parent.children.splice(index+1,0,groupItem)}else parent.children.push(groupItem);else this.rootGroup=groupItem;this.addCondition(groupItem),this.currentGroup=groupItem}enterExpressionEdit(expressionItem){this.clearSelection(),this.exitOperandEdit(),this.cancelOperandAdd(),this.editedExpression&&(this.editedExpression.inEditMode=!1),expressionItem.hovered=!1,this.selectedDimension=expressionItem.expression.dimension,this.selectedCondition=expressionItem.expression.operator?expressionItem.expression.operator:null,this.searchValue=expressionItem.expression.members?.[0]?.value,this.highValue=expressionItem.expression.members?.[1]?.value,expressionItem.inEditMode=!0,this.editedExpression=expressionItem,this.cdr.detectChanges(),this.selectedDimension||this.columnSelect.focus()}getPropertyByName(path){return this.filterableColumns.find((item=>item.name===path))}clearSelection(){for(const group of this.selectedGroups)group.selected=!1;this.selectedGroups=[];for(const expr of this.selectedExpressions)expr.selected=!1;this.selectedExpressions=[],this.toggleContextMenu()}enterExpressionAdd(expressionItem){this.clearSelection(),this.exitOperandEdit(),this.addModeExpression&&(this.addModeExpression.inAddMode=!1),expressionItem.inAddMode=!0,this.addModeExpression=expressionItem,expressionItem.selected&&this.toggleExpression(expressionItem)}onToggleExpression(expressionItem){this.exitOperandEdit(),this.toggleExpression(expressionItem)}toggleExpression(expressionItem){if(expressionItem.selected=!expressionItem.selected,expressionItem.selected)this.selectedExpressions.push(expressionItem);else{const index=this.selectedExpressions.indexOf(expressionItem);this.selectedExpressions.splice(index,1),this.deselectParentRecursive(expressionItem)}}toggleContextMenu(){const contextualGroup=this.findSingleSelectedGroup();(contextualGroup||this.selectedExpressions.length>1)&&(this.contextualGroup=contextualGroup,contextualGroup&&(this.filteringLogics=[{label:this.resourceStrings?.igx_grid_filter_operator_and,selected:contextualGroup.operator===src.t_k.And},{label:this.resourceStrings?.igx_grid_filter_operator_or,selected:contextualGroup.operator===src.t_k.Or}]))}findSingleSelectedGroup(){for(const group of this.selectedGroups){if(this.selectedExpressions.every((op=>this.isInsideGroup(op,group))))return group}return null}isInsideGroup(item,group){return!!item&&(item.parent===group||this.isInsideGroup(item.parent,group))}deleteItem(expressionItem){if(!expressionItem.parent)return this.rootGroup=null,void(this.currentGroup=null);expressionItem===this.currentGroup&&(this.currentGroup=this.currentGroup.parent);const children=expressionItem.parent.children,index=children.indexOf(expressionItem);children.splice(index,1),children.length||this.deleteItem(expressionItem.parent)}onChipRemove(expressionItem){this.deleteItem(expressionItem)}onChipClick(expressionItem){this._clickTimer=setTimeout((()=>{this._preventChipClick||this.onToggleExpression(expressionItem),this._preventChipClick=!1}),this._dblClickDelay)}onChipDblClick(expressionItem){clearTimeout(this._clickTimer),this._preventChipClick=!0,this.enterExpressionEdit(expressionItem)}getConditionFriendlyName(name){return this.resourceStrings?.[`igx_grid_filter_${name}`]||name}getConditionList(){return this.selectedDimension?function getFilterConditionByProperty(dim){return Object.keys(src.tlN)}(this.selectedDimension):[]}onGroupClick(groupItem){this.toggleGroup(groupItem)}toggleGroup(groupItem){this.exitOperandEdit(),this.currentGroup=groupItem}toggleGroupRecursive(groupItem,selected){}deselectParentRecursive(expressionItem){}invokeClick(eventArgs){"Enter"!==eventArgs.key&&" "!==eventArgs.key&&"Spacebar"!==eventArgs.key||(eventArgs.preventDefault(),eventArgs.currentTarget.click())}context(expression,afterExpression){return{$implicit:expression,afterExpression}}onClearButtonClick(event){this.rootGroup=null}onChipSelectionEnd(){const contextualGroup=this.findSingleSelectedGroup();(contextualGroup||this.selectedExpressions.length>1)&&(this.contextualGroup=contextualGroup)}getConditionByFilterOperator(operator){return{iconName:"contains",isUnary:!0}}openValueHelp(dimension){var _this=this;return(0,asyncToGenerator.A)((function*(){return(0,firstValueFrom._)(_this.dialog.open(value_help_component.K,{viewContainerRef:_this._viewContainerRef,data:{dataSettings:_this.data.dataSettings,dimension,options:{initialLevel:1,searchable:!0,showAllMember:!1}}}).afterClosed())}))()}openLowValueHelp(dimension){var _this2=this;return(0,asyncToGenerator.A)((function*(){const slicer=yield _this2.openValueHelp(dimension);slicer&&(_this2.searchValue=slicer.members?.[0]?.value)}))()}openHighValueHelp(dimension){var _this3=this;return(0,asyncToGenerator.A)((function*(){const slicer=yield _this3.openValueHelp(dimension);slicer&&(_this3.highValue=slicer.members?.[0]?.value)}))()}onApply(){this.dialogRef.close(convertExpressionItem2Filter(this.rootGroup))}isDate(value){return"[object Date]"===Object.prototype.toString.call(value)}static#_=this.ctorParameters=()=>[{type:core.ChangeDetectorRef},{type:dialog.bZ},{type:core.ViewContainerRef},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.Vh]}]},{type:dialog.CP,decorators:[{type:core.Optional}]}];static#_2=this.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],syntax:[{type:core.Input}],entitySet:[{type:core.Input}],entityType:[{type:core.Input}],resourceStrings:[{type:core.Input}],columnSelect:[{type:core.ViewChild,args:["columnSelect",{read:property_select_component.t}]}]}};function convertExpressionItem2Filter(item){return item instanceof ExpressionGroupItem?{filteringLogic:item.operator,children:item.children.map((item=>convertExpressionItem2Filter(item)))}:item instanceof ExpressionOperandItem?item.expression:null}function convertFilter2ExpressionItem(iFilter,parent){if((0,src.nRp)(iFilter)){const exGroupItem=new ExpressionGroupItem(iFilter.filteringLogic,parent);return exGroupItem.children=iFilter.children.map((item=>convertFilter2ExpressionItem(item,exGroupItem))),exGroupItem}return new ExpressionOperandItem(iFilter,parent)}NgmAdvancedFilterComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ngm-advanced-filter",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <h4 class="pac-typography__h6" style="pointer-events: none;">\n        {{ \'Ngm.AdvancedFilter.Title\' | translate: {Default: \'Combination Slicer\'} }}\n    </h4>\n    <div class="pac-filter-legend">\n        <div class="pac-filter-legend__item pac-filter-legend__item--and">\n            <span>{{ \'Ngm.AdvancedFilter.AND\' | translate: {Default: \'AND\'} }}</span>\n        </div>\n        <div class="pac-filter-legend__item pac-filter-legend__item--or">\n            <span>{{ \'Ngm.AdvancedFilter.OR\' | translate: {Default: \'OR\'} }}</span>\n        </div>\n    </div>\n</header>\n\n<mat-dialog-content class="mat-typography">\n    <ng-container *ngIf="!rootGroup">\n        <div class="flex gap-2">\n            <button #addRootAndGroupButton mat-stroked-button color="accent" ngmAppearance="dashed"\n                (click)="addAndGroup()"\n            >\n                <mat-icon>add</mat-icon>\n                <span>"{{ \'Ngm.AdvancedFilter.AND\' | translate: {Default: \'AND\'} }}" {{ \'Ngm.AdvancedFilter.GROUP\' | translate: {Default: \'GROUP\'} }}</span>\n            </button>\n\n            <button mat-stroked-button color="accent" ngmAppearance="dashed" (click)="addOrGroup()">\n                <mat-icon>add</mat-icon>\n                <span>"{{ \'Ngm.AdvancedFilter.OR\' | translate: {Default: \'OR\'} }}" {{ \'Ngm.AdvancedFilter.GROUP\' | translate: {Default: \'GROUP\'} }}</span>\n            </button>\n        </div>\n        \n        <div class="pac-filter-empty">\n            <h6 class="pac-filter-empty__title">\n                {{ \'Ngm.AdvancedFilter.Tips\' | translate: {Default: \'Start with creating a group of conditions linked with "And" or "Or"\'} }}\n            </h6>\n        </div>\n    </ng-container>\n\n    <ng-template #filterOperandTemplate let-expressionItem>\n        <div *ngIf="!expressionItem.inEditMode"\n            class="pac-filter-tree__expression-item"\n            (mouseenter)="expressionItem.hovered = true"\n            (mouseleave)="expressionItem.hovered = false"\n            >\n\n            <mat-chip-listbox >\n                <mat-chip-option [value]="expressionItem" [selected]="expressionItem.selected" removable selectable\n                    (removed)="onChipRemove(expressionItem)">\n                    <mat-chip-avatar>\n                        <button mat-icon-button displayDensity="cosy" (click)="enterExpressionEdit(expressionItem)">\n                            <mat-icon fontSet="material-icons-outlined">edit</mat-icon>\n                        </button>\n                    </mat-chip-avatar>\n                    <span class="pac-filter-tree__expression-column">{{ expressionItem.columnHeader || expressionItem.expression.dimension?.dimension }}</span>\n                    <span class="pac-filter-tree__expression-condition">\n                        {{ getConditionFriendlyName(expressionItem.expression.operator) }}\n                    </span>\n                    <span >\n                        {{ isDate(expressionItem.expression.members?.[0].value) ? (expressionItem.expression.members?.[0].value | date) : expressionItem.expression.members?.[0].value }}\n                    </span>\n                    <span *ngIf="expressionItem.expression.operator === FilterOperator.BT">\n                        =>\n                        {{ isDate(expressionItem.expression.members?.[1]?.value) ? (expressionItem.expression.members?.[1]?.value | date) : expressionItem.expression.members?.[1]?.value }}\n                    </span>\n\n                    <button matChipRemove>\n                        <mat-icon>cancel</mat-icon>\n                    </button>\n                </mat-chip-option>\n              </mat-chip-listbox>\n\n            <div class="pac-filter-tree__expression-actions"\n                *ngIf="(expressionItem.selected && selectedExpressions.length === 1) || expressionItem.hovered">\n            </div>\n        </div>\n\n        <div *ngIf="expressionItem.inEditMode"\n             #editingInputsContainer\n             class="pac-filter-tree__inputs flex gap-2"\n            >\n\n            <ngm-property-select #columnSelect floatLabel="always" displayDensity="cosy"\n                required\n                [entityType]="entityType"\n                [capacities]="[PropertyCapacity.Dimension]"\n                [ngModel]="selectedDimension"\n                (ngModelChange)="selectedDimension=$event">\n            </ngm-property-select>\n\n            <mat-form-field appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>\n                    {{ \'Ngm.AdvancedFilter.Operator\' | translate: {Default: \'Operator\'} }}\n                </mat-label>\n                <mat-select required [(ngModel)]="selectedCondition"\n                    [disabled]="!selectedDimension">\n                  <mat-option *ngFor="let operator of operators" [value]="operator.value">\n                    <span class="pac-grid__filtering-dropdown-text">{{operator.label}}</span>\n                  </mat-option>\n                </mat-select>\n            </mat-form-field>\n            \n            <mat-form-field *ngIf="selectedDimension" appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>{{ \'Ngm.AdvancedFilter.Value\' | translate: {Default: \'Value\'} }}</mat-label>\n                <input matInput [(ngModel)]="searchValue" [disabled]="!selectedDimension" required>\n                <button mat-icon-button matSuffix [disabled]="!selectedDimension" (click)="openLowValueHelp(selectedDimension)">\n                    <mat-icon>help_outline</mat-icon>\n                </button>\n            </mat-form-field>\n\n            <mat-form-field *ngIf="selectedDimension && selectedCondition === FilterOperator.BT" appearance="fill" floatLabel="always" displayDensity="cosy">\n                <mat-label>{{ \'Ngm.AdvancedFilter.Value\' | translate: {Default: \'Value\'} }}</mat-label>\n                <input matInput [(ngModel)]="highValue" [disabled]="!selectedDimension" required>\n                <button mat-icon-button matSuffix [disabled]="!selectedDimension" (click)="openHighValueHelp(selectedDimension)">\n                    <mat-icon>help_outline</mat-icon>\n                </button>\n            </mat-form-field>\n\n            <div class="pac-filter-tree__inputs-actions">\n                <button mat-icon-button color="primary"\n                        [disabled]="!operandCanBeCommitted()"\n                        (click)="commitOperandEdit()">\n                    <mat-icon>check</mat-icon>\n                </button>\n                <button mat-icon-button ngmAppearance="danger"\n                        (click)="cancelOperandEdit()">\n                    <mat-icon>close</mat-icon>\n                </button>\n            </div>\n        </div>\n    </ng-template>\n    \n    <ng-template #addExpressionsTemplate let-expressionItem let-afterExpression="afterExpression">\n        <button #addConditionButton\n            mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addCondition(expressionItem, afterExpression)"\n        >\n            <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.Condition\' | translate: {Default: \'Condition\'} }}</span>\n        </button>\n\n        <button mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addAndGroup(expressionItem, afterExpression)">\n                <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.AddGroup\' | translate: {Default: \'"ADD" GROUP\'} }}</span>\n        </button>\n\n        <button mat-stroked-button color="accent" ngmAppearance="dashed"\n                [disabled]="!!editedExpression"\n                (click)="addOrGroup(expressionItem, afterExpression)">\n            <mat-icon>add</mat-icon>\n            <span>{{ \'Ngm.AdvancedFilter.OrGroup\' | translate: {Default: \'"OR" GROUP\'} }}</span>\n        </button>\n    </ng-template>\n\n    <ng-template #expressionTreeTemplate let-expressionItem>\n        <div class="pac-filter-tree">\n            <div tabindex="0"\n                 class="pac-filter-tree__line"\n                 [ngClass]="{\n                    \'pac-filter-tree__line--and\': expressionItem.operator === 0,\n                    \'pac-filter-tree__line--or\': expressionItem.operator === 1,\n                    \'pac-filter-tree__line--selected\': expressionItem.selected\n                 }"\n                 (keydown)="invokeClick($event)"\n                 (click)="onGroupClick(expressionItem)"\n            ></div>\n\n            <div class="pac-filter-tree__expression">\n                <ng-container *ngFor="let expr of expressionItem.children">\n                    <ng-container *ngTemplateOutlet="isExpressionGroup(expr) ? expressionTreeTemplate : filterOperandTemplate; context: context(expr)"></ng-container>\n                </ng-container>\n                <div *ngIf="currentGroup === expressionItem" class="pac-filter-tree__buttons flex gap-4"\n                    #currentGroupButtonsContainer\n                >\n                    <ng-container *ngTemplateOutlet="addExpressionsTemplate; context: context(expressionItem)"></ng-container>\n                    <button mat-stroked-button color="accent" \n                            *ngIf="expressionItem !== rootGroup"\n                            [disabled]="!!editedExpression || expressionItem.children.length < 2"\n                            (click)="endGroup(expressionItem)">\n                        <span>{{ \'Ngm.AdvancedFilter.EndGroup\' | translate: {Default: \'END GROUP\'} }}</span>\n                    </button>\n\n                    <button mat-stroked-button color="accent" ngmAppearance="danger"\n                            *ngIf="expressionItem !== rootGroup"\n                            [disabled]="!!editedExpression"\n                            (click)="onChipRemove(expressionItem)">\n                        <span>{{ \'Ngm.AdvancedFilter.DeleteGroup\' | translate: {Default: \'DELETE GROUP\'} }}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n\n    </ng-template>\n\n    <ng-container *ngIf="rootGroup">\n        <ng-container *ngTemplateOutlet="expressionTreeTemplate; context: context(rootGroup)"></ng-container>\n    </ng-container>\n\n</mat-dialog-content>\n<mat-dialog-actions>\n    <button mat-button (click)="onClearButtonClick($event)">\n        {{ \'Ngm.Common.Clear\' | translate: {Default: \'Clear\'} }}\n    </button>\n    <div ngmButtonGroup>\n        <button mat-button mat-dialog-close>{{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}</button>\n        <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>{{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}</button>\n    </div>\n</mat-dialog-actions>\n',host:{class:"ngm-advanced-filter"},styles:[advanced_filter_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[core.ChangeDetectorRef,dialog.bZ,core.ViewContainerRef,Object,dialog.CP])],NgmAdvancedFilterComponent)},"./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>NgmAdvancedSlicerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var advanced_slicer_componentngResource=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.scss?ngResource"),advanced_slicer_componentngResource_default=__webpack_require__.n(advanced_slicer_componentngResource),drag_drop=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),chips=__webpack_require__("./node_modules/@angular/material/fesm2022/chips.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),menu=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),slide_toggle=__webpack_require__("./node_modules/@angular/material/fesm2022/slide-toggle.mjs"),tooltip=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),types=__webpack_require__("./packages/angular/entity/types.ts"),entity_module=__webpack_require__("./packages/angular/entity/entity.module.ts"),parameter_module=__webpack_require__("./packages/angular/parameter/parameter.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js");const ADVANCED_SLICER_OPERATORS=[{value:src.p$2.Equal,label:"Equal"},{value:src.p$2.NotEqual,label:"Not Equal"},{value:src.p$2.LessThan,label:"Less Than"},{value:src.p$2.GreaterThan,label:"Greater Than"},{value:src.p$2.LessEqual,label:"Less Equal"},{value:src.p$2.GreaterEqual,label:"Greater Equal"},{value:src.p$2.Between,label:"Between",valueSize:2},{value:src.p$2.NotBetween,label:"NotBetween",valueSize:2},{value:src.p$2.TopCount,label:"Top Count",hasOther:!0},{value:src.p$2.BottomCount,label:"Bottom Count",hasOther:!0},{value:src.p$2.TopPercent,label:"Top Percent",hasOther:!0},{value:src.p$2.BottomPercent,label:"Bottom Percent",hasOther:!0},{value:src.p$2.TopSum,label:"Top Sum",hasOther:!0},{value:src.p$2.BottomSum,label:"Bottom Sum",hasOther:!0}];let NgmAdvancedSlicerComponent=class NgmAdvancedSlicerComponent{get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}constructor(data){this.data=data,this.isDialogContainer=!0,this.DisplayBehaviour=src.Y$2,this.PropertyCapacity=types.w,this.dsCoreService=(0,core.inject)(core_service.g),this.translateService=(0,core.inject)(ngx_translate_core.c$),this._formBuilder=(0,core.inject)(fesm2022_forms.ok),this.dialogRef=(0,core.inject)(dialog.CP,{optional:!0}),this.dataSettings$=new BehaviorSubject.t(null),this.formGroup=new fesm2022_forms.gE({context:new fesm2022_forms.MJ,path:new fesm2022_forms.MJ,operator:new fesm2022_forms.MJ,value:this._formBuilder.array([null,null]),measure:new fesm2022_forms.MJ(null),other:new fesm2022_forms.MJ}),this.entityType$=this.dataSettings$.pipe((0,filter.p)(src.TLi),(0,switchMap.n)((({dataSource,entitySet})=>this.dsCoreService.selectEntitySet(dataSource,entitySet))),(0,map.T)((({entityType})=>entityType))),this.operator=(0,rxjs_interop.ot)(this.formGroup.valueChanges.pipe((0,startWith.Z)(this.formGroup.value),(0,map.T)((({operator})=>(operator=operator||this.formGroup.value.operator,ADVANCED_SLICER_OPERATORS.find((item=>item.value===operator))))))),this.to=(0,core.computed)((()=>2===this.operator()?.valueSize)),this.hasOther=(0,core.computed)((()=>this.operator()?.hasOther)),this.advancedSlicerOperators=(0,rxjs_interop.ot)(this.translateService.stream("Ngm.Selection.ADVANCED_SLICER").pipe((0,map.T)((i18n=>ADVANCED_SLICER_OPERATORS.map((item=>({...item,label:i18n[item.value]??item.label}))))))),this._operatorChanged=this.formGroup.get("operator").valueChanges.pipe((0,rxjs_interop.pQ)()).subscribe((operator=>{2!==ADVANCED_SLICER_OPERATORS.find((item=>item.value===operator))?.valueSize&&this.formGroup.patchValue({value:[this.formGroup.value.value[0],null]})})),this.dataSettings=this.data?.dataSettings,this.data?.model&&this.formGroup.patchValue(this.data.model),this.data}onApply(){this.dialogRef.close(this.formGroup.value)}static#_=this.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.Vh]}]}];static#_2=this.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],dataSettings:[{type:core.Input}]}};NgmAdvancedSlicerComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.X1,drag_drop.ad,dialog.hM,icon.m_,fesm2022_button.Hl,input.fS,chips.YN,slide_toggle.mV,tooltip.uc,divider.w,menu.Cn,fesm2022_select.Ve,ngx_translate_core.h,common_module.y,entity_module.e,parameter_module.y],selector:"ngm-advanced-slicer",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <h4 style="pointer-events: none;">\n        {{ \'Ngm.AdvancedSlicer.TITLE\' | translate: {Default: "Advanced Slicer"} }}\n    </h4>\n</header>\n\n<mat-dialog-content class="mat-typography">\n    <form [formGroup]="formGroup" class="flex flex-col justify-start items-stretch gap-2">\n        <div>{{ \'Ngm.AdvancedSlicer.CONTEXT\' | translate: {Default: "Context"} }}</div>\n\n        <ngm-property-array class="ngm-advanced-slicer__context"\n            formControlName="context"\n            [dataSettings]="dataSettings"\n            [entityType]="entityType$ | async"\n            [capacities]="[PropertyCapacity.Dimension]"\n        ></ngm-property-array>\n\n        <ngm-select formControlName="operator"\n            [label]="\'Ngm.AdvancedSlicer.OPERATOR\' | translate: {Default: \'Operator\'}"\n            [selectOptions]="advancedSlicerOperators()"\n        >\n            <ng-template ngmOptionContent let-operator>\n                <ngm-display-behaviour class="flex-1" [option]="operator" [displayBehaviour]="DisplayBehaviour.auto"></ngm-display-behaviour>\n            </ng-template>\n            <mat-slide-toggle ngmSuffix *ngIf="hasOther()" formControlName="other" (click)="$event.stopPropagation();">\n                {{ \'Ngm.AdvancedSlicer.ENABLE_OTHER\' | translate: {Default: "Enable Other"} }}\n            </mat-slide-toggle>\n        </ngm-select>\n\n        <div class="flex justify-start items-center gap-2" formArrayName="value">\n            <ngm-parameter-select [label]=" to() ? (\'Ngm.AdvancedSlicer.VALUE_FROM\' | translate: {Default: \'From\'}) : (\'Ngm.AdvancedSlicer.VALUE\' | translate: {Default: \'Value\'}) "\n                [dataSettings]="dataSettings"\n                [entityType]="entityType$ | async"\n                formControlName="0"\n                >\n            </ngm-parameter-select>\n            <ngm-parameter-select *ngIf="to()"\n                [label]=" \'Ngm.AdvancedSlicer.VALUE_TO\' | translate: {Default: \'To\'} "\n                [dataSettings]="dataSettings"\n                [entityType]="entityType$ | async"\n                formControlName="1"\n                >\n            </ngm-parameter-select>\n        </div>\n\n        <ngm-measure-select searchable formControlName="measure"\n            [label]="\'Ngm.AdvancedSlicer.MEASURE\' | translate: {Default: \'Measure\'}"\n            [placeholder]=" \'Ngm.AdvancedSlicer.MeasureSelectPlaceholder\' | translate: {Default: \'select or create a measure\'} "\n            [dataSettings]="dataSettings"\n        >\n        </ngm-measure-select>\n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions>\n    <button mat-button>\n        {{ \'Ngm.Common.Reset\' | translate: {Default: "Reset"} }}\n    </button>\n    \n    <div ngmButtonGroup>\n        <button mat-button mat-dialog-close>\n            {{ \'Ngm.Common.Cancel\' | translate: {Default: "Cancel"} }}\n        </button>\n        <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>\n            {{ \'Ngm.Common.Apply\' | translate: {Default: "Apply"} }}\n        </button>\n    </div>\n</mat-dialog-actions>\n',styles:[advanced_slicer_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[Object])],NgmAdvancedSlicerComponent)},"./packages/angular/selection/base-slicers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>BaseSlicersComponent});var _home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_core_rxjs_interop__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/angular/controls/value-help/value-help.component.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/core/services/core.service.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/angular/core/models/date-function.ts"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),lodash_es__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/lodash-es/pick.js"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),_advanced_filter__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/angular/selection/advanced-filter/advanced-filter.component.ts"),_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts"),_timer___WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.ts"),_types__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/angular/selection/types.ts");let BaseSlicersComponent=class BaseSlicersComponent{constructor(){this.isSemanticCalendar=_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.pt_,this.coreService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_2__.s),this._dialog=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.bZ),this.viewContainerRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewContainerRef),this.dataSettings$=new rxjs__WEBPACK_IMPORTED_MODULE_4__.t(null),this.entityTypeSignal=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.signal)(null),this.entityType$=(0,_angular_core_rxjs_interop__WEBPACK_IMPORTED_MODULE_5__.br)(this.entityTypeSignal),this.editable=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.input)(!1,{transform:_angular_core__WEBPACK_IMPORTED_MODULE_1__.booleanAttribute}),this.dateVariables=this.coreService.getDateVariables().filter((variable=>!!variable.dateRange))}get dataSettings(){return this.dataSettings$.value}set dataSettings(value){this.dataSettings$.next(value)}get entityType(){return this.entityTypeSignal()}set entityType(value){this.entityTypeSignal.set(value)}openSlicerCreator(property){var _this=this;return(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__.A)((function*(){const entityType=_this.entityType;if(property===_types__WEBPACK_IMPORTED_MODULE_7__.GH.CombinationSlicer){const combinationSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this._dialog.open(_advanced_filter__WEBPACK_IMPORTED_MODULE_9__.A1,{viewContainerRef:_this.viewContainerRef,data:{dataSettings:_this.dataSettings,entityType,syntax:entityType.syntax}}).afterClosed());combinationSlicer&&(yield _this.addSlicer(combinationSlicer))}else if(property===_types__WEBPACK_IMPORTED_MODULE_7__.GH.AdvancedSlicer){const advancedSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this._dialog.open(_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_10__.G,{viewContainerRef:_this.viewContainerRef,data:{dataSettings:{..._this.dataSettings}}}).afterClosed());advancedSlicer&&(yield _this.addSlicer(advancedSlicer))}else property===_types__WEBPACK_IMPORTED_MODULE_7__.GH.Variable||(property.semantics?.semantic===_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.a7d.Calendar?yield _this.openDynamicDateHelp(property):yield _this.openValueHelp(property))}))()}openDynamicDateHelp(property,variable){var _this2=this;return(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__.A)((function*(){const timeRangesSlicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this2._dialog.open(_timer___WEBPACK_IMPORTED_MODULE_11__.g,{viewContainerRef:_this2.viewContainerRef,data:{currentDate:"SYSTEMTIME",dataSettings:_this2.dataSettings,entityType:_this2.entityType,slicer:{dimension:{dimension:property.name},currentDate:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_12__.iI.TODAY,ranges:variable?[variable]:[]}}}).afterClosed());timeRangesSlicer&&_this2.addSlicer(timeRangesSlicer)}))()}addSlicer(slicer){return(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__.A)((function*(){}))()}openValueHelp(property){var _this3=this;return(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__.A)((function*(){const dimension=property.role===_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.H$f.variable?{dimension:property.referenceDimension,parameter:property.name}:{dimension:property.name},selectionType=property.role===_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.H$f.variable&&property.variableSelectionType===_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.flO.Value?_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.dDN.Single:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.dDN.Multiple,slicer=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this3._dialog.open(_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_13__.K,{viewContainerRef:_this3.viewContainerRef,data:{dataSettings:(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.A)(_this3.dataSettings,["dataSource","entitySet"]),dimension,options:{selectionType,searchable:!0,initialLevel:1}}}).afterClosed());slicer&&(yield _this3.addSlicer({...slicer}))}))()}openSlicerEditor(slicer){var _this4=this;return(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__.A)((function*(){if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.nRp)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this4._dialog.open(_advanced_filter__WEBPACK_IMPORTED_MODULE_9__.A1,{viewContainerRef:_this4.viewContainerRef,data:{dataSettings:_this4.dataSettings,entityType:_this4.entityType,syntax:_this4.entityType.syntax,advancedFilter:(0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.mgf)(slicer)}}).afterClosed());if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.bmA)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this4._dialog.open(_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_10__.G,{viewContainerRef:_this4.viewContainerRef,data:{dataSettings:_this4.dataSettings,model:slicer}}).afterClosed());if((0,_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.YIK)(slicer))return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(_this4._dialog.open(_timer___WEBPACK_IMPORTED_MODULE_11__.g,{viewContainerRef:_this4.viewContainerRef,data:{entityType:_this4.entityType,slicer}}).afterClosed());{const dialogRef=_this4._dialog.open(_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_13__.K,{viewContainerRef:_this4.viewContainerRef,data:{dimension:(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.A)(slicer?.dimension,"dimension","hierarchy","displayBehaviour"),slicer,dataSettings:_this4.dataSettings,options:{selectionType:slicer.selectionType,searchable:!0,initialLevel:1}}});return yield(0,rxjs__WEBPACK_IMPORTED_MODULE_8__._)(dialogRef.afterClosed())}}))()}static#_=this.propDecorators={dataSettings:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input}],entityType:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input}],editable:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:[{isSignal:!0,alias:"editable",required:!1,transform:void 0}]}]}};BaseSlicersComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_15__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)({})],BaseSlicersComponent)},"./packages/angular/selection/selection.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>NgmSelectionModule});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_cdk_menu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/menu.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),_angular_material_button__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),_angular_material_chips__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@angular/material/fesm2022/chips.mjs"),_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),_angular_material_divider__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),_angular_material_icon__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),_angular_material_input__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),_angular_material_menu__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),_angular_material_select__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),_angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@angular/material/fesm2022/slide-toggle.mjs"),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),_metad_ocap_angular_common__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./packages/angular/common/common.module.ts"),_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./packages/angular/controls/controls.module.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./packages/angular/core/core.module.ts"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./packages/angular/core/directives/button-group.directive.ts"),_metad_ocap_angular_entity__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./packages/angular/entity/entity.module.ts"),_metad_ocap_angular_parameter__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./packages/angular/parameter/parameter.module.ts"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./packages/angular/selection/advanced-slicer/advanced-slicer.component.ts"),_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.ts"),_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/selection/slicer/slicer.component.ts"),_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/selection/slicers/slicers.component.ts");let NgmSelectionModule=class NgmSelectionModule{};NgmSelectionModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__.U,_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__.V,_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__.H],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.CommonModule,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.X1,_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_7__.ad,_angular_cdk_menu__WEBPACK_IMPORTED_MODULE_8__.iw,_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.hM,_angular_material_icon__WEBPACK_IMPORTED_MODULE_10__.m_,_angular_material_button__WEBPACK_IMPORTED_MODULE_11__.Hl,_angular_material_input__WEBPACK_IMPORTED_MODULE_12__.fS,_angular_material_chips__WEBPACK_IMPORTED_MODULE_13__.YN,_angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_14__.mV,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_15__.uc,_angular_material_divider__WEBPACK_IMPORTED_MODULE_16__.w,_angular_material_menu__WEBPACK_IMPORTED_MODULE_17__.Cn,_angular_material_select__WEBPACK_IMPORTED_MODULE_18__.Ve,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_19__.h,_metad_ocap_angular_controls__WEBPACK_IMPORTED_MODULE_20__.N,_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_21__.T,_metad_ocap_angular_common__WEBPACK_IMPORTED_MODULE_22__.y,_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_23__.R,_metad_ocap_angular_parameter__WEBPACK_IMPORTED_MODULE_24__.y,_metad_ocap_angular_entity__WEBPACK_IMPORTED_MODULE_25__.e,_advanced_slicer_advanced_slicer_component__WEBPACK_IMPORTED_MODULE_26__.G],exports:[_slicer_slicer_component__WEBPACK_IMPORTED_MODULE_2__.U,_slicers_slicers_component__WEBPACK_IMPORTED_MODULE_3__.V,_slicer_bar_slicer_bar_component__WEBPACK_IMPORTED_MODULE_4__.H]})],NgmSelectionModule)},"./packages/angular/selection/slicer-bar/slicer-bar.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>SlicerBarComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var slicer_bar_componentngResource=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.scss?ngResource"),slicer_bar_componentngResource_default=__webpack_require__.n(slicer_bar_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts"),types=__webpack_require__("./packages/angular/selection/types.ts");let SlicerBarComponent=class SlicerBarComponent extends base_slicers.g{get slicers(){return this.slicers$.value}set slicers(value){this.slicers$.next(value)}get showCombinationSlicer(){return this.entityType?.syntax===src.w4h.SQL&&this.capacities?.includes(types.GH.CombinationSlicer)}get showAdvancedSlicer(){return this.entityType?.syntax===src.w4h.MDX&&this.capacities?.includes(types.GH.AdvancedSlicer)}get highlight(){return this.searchControl.value}constructor(data){super(),this.data=data,this.DisplayBehaviour=src.Y$2,this.SlicersCapacity=types.GH,this.isDialogContainer=!0,this.slicers$=new BehaviorSubject.t([]),this.removed=new core.EventEmitter,this.valueChange=new core.EventEmitter,this.dimensions$=this.entityType$.pipe((0,filter.p)(src.TLi),(0,map.T)(src.Jwe)),this.dateVariables=this.coreService.getDateVariables().filter((variable=>!!variable.dateRange)),this.searchControl=new fesm2022_forms.MJ("")}ngOnInit(){this.data&&(this.slicers=this.data.value,this.entityType=this.data.entityType,this.dataSettings=this.data.dataSettings,this.capacities=this.data.capacities)}removeSelectOption(member){this.removed.emit(member)}update(value,index){this.slicers=[...this.slicers],this.slicers[index]=value}remove(index){this.slicers=[...this.slicers],this.slicers.splice(index,1)}addSlicer(slicer){var _this=this;return(0,asyncToGenerator.A)((function*(){_this.slicers=_this.slicers??[];const index=_this.slicers.findIndex((item=>(0,src.hmx)(item.dimension)===(0,src.hmx)(slicer.dimension)));index>-1?_this.update(slicer,index):_this.slicers=[..._this.slicers,slicer]}))()}static#_=this.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.Vh]}]}];static#_2=this.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],slicers:[{type:core.Input}],capacities:[{type:core.Input}],removed:[{type:core.Output}],valueChange:[{type:core.Output}]}};SlicerBarComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ngm-slicer-bar",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n  <h4 style="pointer-events: none;">\n    {{ \'Ngm.Selection.Slicers\' | translate: {Default: "Slicers"} }}\n  </h4>\n</header>\n\n<mat-dialog-content class="mat-typography">\n  <ng-container *ngFor="let slicer of slicers$ | async; index as i">\n    <ngm-slicer [slicer]="slicer"\n      [dataSettings]="dataSettings"\n      [entityType]="entityType"\n      [editable]="editable()"\n      (slicerChange)="update($event, i)"\n      (removed)="remove(i)">\n    </ngm-slicer>\n    <mat-divider></mat-divider>\n  </ng-container>\n</mat-dialog-content>\n\n<mat-dialog-actions style="display: flex; justify-content: space-between; align-items: center;">\n  <button mat-button color="primary" ngmAppearance="dashed" [matMenuTriggerFor]="menu">\n    <mat-icon>add</mat-icon>\n    {{ \'Ngm.Common.ADD\' | translate: {Default: "Add"} }}\n  </button>\n\n  <div ngmButtonGroup>\n    <button mat-button mat-dialog-close cdkFocusInitial>\n      {{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}\n    </button>\n    <button mat-raised-button color="accent" cdkFocusInitial [mat-dialog-close]="slicers">\n      {{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}\n    </button>\n  </div>\n</mat-dialog-actions>\n\n<mat-menu #menu="matMenu" class="ngm-density__compact">\n  <ngm-search class="px-1" [formControl]="searchControl" (click)="$event.stopPropagation()"></ngm-search>\n\n  <ng-container *ngFor="let property of dimensions$ | async">\n    <button mat-menu-item *ngIf="isSemanticCalendar(property); else menuItem" (click)="openSlicerCreator(property)"\n      [matMenuTriggerFor]="calendarMenu"\n      [matMenuTriggerData]="{property: property}"\n    >\n      <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n        [highlight]="highlight">\n      </ngm-entity-property>\n    </button>\n\n    <ng-template #menuItem>\n      <button mat-menu-item (click)="openValueHelp(property)">\n        <ngm-entity-property [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n          [highlight]="highlight">\n        </ngm-entity-property>\n      </button>\n    </ng-template>\n  </ng-container>\n\n  <button mat-menu-item *ngIf="showCombinationSlicer"\n    (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.CombinationSlicer)">\n    <mat-icon>tune</mat-icon>\n    {{ \'Ngm.Selection.CombinationSlicer\' | translate: {Default: \'Combination Slicer\'} }}\n  </button>\n\n  <button mat-menu-item *ngIf="showAdvancedSlicer"\n    (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.AdvancedSlicer)">\n    <mat-icon>data_array</mat-icon>\n    {{ \'Ngm.Selection.AdvancedSlicer\' | translate: {Default: \'Advanced Slicer\'} }}\n  </button>\n</mat-menu>\n\n<mat-menu #calendarMenu="matMenu" class="ngm-density__compact">\n  <ng-template matMenuContent let-property="property">\n    <button mat-menu-item (click)="openValueHelp(property)">\n      <mat-icon fontSet="material-icons-outlined">people_outline</mat-icon>\n      {{ \'Ngm.Selection.DimensionMembers\' | translate: {Default: \'Dimension Members\'} }}\n    </button>\n\n    <button mat-menu-item *ngFor="let variable of dateVariables"\n      (click)="openDynamicDateHelp(property, variable.dateRange)">\n      {{variable.name}}\n    </button>\n    \n  </ng-template>\n</mat-menu>\n',styles:[slicer_bar_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[Object])],SlicerBarComponent)},"./packages/angular/selection/slicer/slicer.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>SlicerComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var slicer_componentngResource=__webpack_require__("./packages/angular/selection/slicer/slicer.component.scss?ngResource"),slicer_componentngResource_default=__webpack_require__.n(slicer_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts");let SlicerComponent=class SlicerComponent extends base_slicers.g{constructor(){super(...arguments),this.translate=(0,core.inject)(ngx_translate_core.c$),this.slicer=(0,core.input)(),this.disabled=(0,core.input)(!1,{transform:core.booleanAttribute}),this.limit=(0,core.input)(),this.removed=new core.EventEmitter,this.slicerChange=new core.EventEmitter,this.title$=(0,combineLatest.z)([(0,rxjs_interop.br)(this.slicer).pipe((0,filter.p)((value=>!!value))),this.entityType$]).pipe((0,map.T)((([slicer,entityType])=>{const SELECTION=this.translate.instant("Ngm.Selection",{Default:{}});if((0,src.bmA)(slicer))return SELECTION?.AdvancedSlicer??"Advanced Slicer";if((0,src.nRp)(slicer))return SELECTION?.CombinationSlicer??"Combination Slicer";if(entityType){if(slicer.dimension.parameter){const property=entityType.parameters[slicer.dimension.parameter];return property.caption||property.name}const property=(0,src.jZc)(entityType,slicer.dimension);return property?.caption||property?.name}return slicer.dimension?.dimension}))),this.members=(0,core.computed)((()=>this.slicer()?.members?.slice(0,this.limit()||this.slicer()?.members?.length).filter(src.TLi)??[])),this.more=(0,core.computed)((()=>this.limit?this.slicer()?.members?.length-this.limit():0)),this.displayBehaviour$=(0,rxjs_interop.br)(this.slicer).pipe((0,map.T)((slicer=>slicer?.dimension?.displayBehaviour))),this.advancedSlicer$=(0,rxjs_interop.br)(this.slicer).pipe((0,combineLatestWith.v)(this.translate.stream("Ngm.Selection")),(0,map.T)((([slicer,SELECTION])=>(0,src.bmA)(slicer)?(0,src.GfN)(slicer,SELECTION?.OnContext):(0,src.nRp)(slicer)?(0,src.OAc)(slicer):(0,src.YIK)(slicer)?(0,src.JJz)(slicer,SELECTION?.TimeRanges):null)))}remove(){this.removed.emit()}removeMember(index){const value={...this.slicer(),members:[...this.slicer().members]};value.members.splice(index,1),this.slicerChange.emit(value)}editSlicer(){var _this=this;return(0,asyncToGenerator.A)((function*(){let slicer=yield _this.openSlicerEditor(_this.slicer());slicer&&(slicer={..._this.slicer(),...slicer,dimension:{..._this.slicer().dimension,...slicer.dimension}},_this.slicerChange.emit(slicer))}))()}static#_=this.propDecorators={slicer:[{type:core.Input,args:[{isSignal:!0,alias:"slicer",required:!1,transform:void 0}]}],disabled:[{type:core.Input,args:[{isSignal:!0,alias:"disabled",required:!1,transform:void 0}]}],limit:[{type:core.Input,args:[{isSignal:!0,alias:"limit",required:!1,transform:void 0}]}],removed:[{type:core.Output}],slicerChange:[{type:core.Output}]}};SlicerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ngm-slicer",template:'<div class="flex justify-start items-center">\n  <button type="button" mat-icon-button *ngIf="editable()" [disabled]="disabled()" displayDensity="cosy"\n    (click)="editSlicer()">\n    <mat-icon>edit</mat-icon>\n  </button>\n\n  <span *ngIf="title$ | async as title">{{title}}</span>\n\n  <button *ngIf="editable()" mat-icon-button [disabled]="disabled()" displayDensity="cosy" class="ngm-slicer__remove"\n    (click)="remove()">\n    <mat-icon color="warn">remove_circle_outline</mat-icon>\n  </button>\n</div>\n\n@if (slicer()) {\n  <mat-chip-listbox [selectable]="false">\n    @for (member of members(); track member.key; let i = $index) {\n      <mat-chip-option [value]="member"\n        [removable]="editable()"\n        [matTooltip]="(member.key || member.value) + \':\\n\' + (member.caption || member.label || \'\')"\n        (removed)="removeMember(i)">\n        <ngm-display-behaviour class="ngm-slicer__label" [class.ngm-slicer__exclude]="slicer().exclude"\n          [displayBehaviour]="displayBehaviour$ | async"\n          [option]="member"\n        >\n        </ngm-display-behaviour>\n        <mat-icon *ngIf="editable()" matChipRemove>cancel</mat-icon>\n      </mat-chip-option>\n    }\n\n    <mat-chip-option *ngIf="more() > 0">\n      +{{ more() }}\n    </mat-chip-option>\n    \n    @if (advancedSlicer$ | async; as advancedSlicer) {\n      <mat-chip-option [matTooltip]="advancedSlicer">\n        <div class="whitespace-normal">{{ advancedSlicer }}</div>\n      </mat-chip-option>\n    }\n  </mat-chip-listbox>\n}',styles:[slicer_componentngResource_default()]})],SlicerComponent)},"./packages/angular/selection/slicers/slicers.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>SlicersComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var slicers_componentngResource=__webpack_require__("./packages/angular/selection/slicers/slicers.component.scss?ngResource"),slicers_componentngResource_default=__webpack_require__.n(slicers_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),core_service=__webpack_require__("./packages/angular/core/core.service.ts"),src=__webpack_require__("./packages/core/src/index.ts"),pick=__webpack_require__("./node_modules/lodash-es/pick.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),empty=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),base_slicers=__webpack_require__("./packages/angular/selection/base-slicers.ts"),slicer_bar_component=__webpack_require__("./packages/angular/selection/slicer-bar/slicer-bar.component.ts"),types=__webpack_require__("./packages/angular/selection/types.ts");let SlicersComponent=class SlicersComponent extends base_slicers.g{constructor(){super(...arguments),this.DisplayBehaviour=src.Y$2,this.SlicersCapacity=types.GH,this.dsCoreService=(0,core.inject)(core_service.g),this.slicers$=new BehaviorSubject.t([]),this.inline=(0,core.input)(!1,{transform:core.booleanAttribute}),this.limit=(0,core.input)(),this.capacities=(0,core.input)(),this.valueChange=(0,core.output)(),this.searchControl=new fesm2022_forms.MJ(null),this.showCombinationSlicer=(0,core.computed)((()=>this.entityTypeSignal()?.syntax===src.w4h.SQL&&this.capacities()?.includes(types.GH.CombinationSlicer))),this.showAdvancedSlicer=(0,core.computed)((()=>this.entityTypeSignal()?.syntax===src.w4h.MDX&&this.capacities()?.includes(types.GH.AdvancedSlicer))),this.showVariable=(0,core.computed)((()=>this.entityTypeSignal()?.syntax===src.w4h.MDX&&this.capacities()?.includes(types.GH.Variable))),this.dimensions$=this.entityType$.pipe((0,filter.p)((val=>!!val)),(0,combineLatestWith.v)(this.searchControl.valueChanges.pipe((0,startWith.Z)(""))),(0,map.T)((([entityType,search])=>{const dimensions=(0,src.Jwe)(entityType),text=search?.trim().toLowerCase();return text?dimensions.filter((item=>item.name.toLowerCase().includes(text)||item.caption?.toLowerCase().includes(text))):dimensions.slice()}))),this.variables$=this.entityType$.pipe((0,filter.p)(src.TLi),(0,combineLatestWith.v)(this.searchControl.valueChanges.pipe((0,startWith.Z)(""))),(0,map.T)((([entityType,search])=>{const variables=(0,src.DfM)(entityType),text=search?.trim().toLowerCase();return text?variables.filter((item=>item.name.toLowerCase().includes(text)||item.caption?.toLowerCase().includes(text))):variables.slice()}))),this.isDisabled=!1,this.entityTypeSub=this.dataSettings$.pipe((0,filter.p)((value=>!!value)),(0,filter.p)((({dataSource,entitySet})=>!!dataSource&&!!entitySet)),(0,switchMap.n)((({dataSource,entitySet})=>this.dsCoreService.selectEntitySet(dataSource,entitySet).pipe((0,catchError.W)((error=>(console.error(error),empty.w)))))),(0,map.T)((entitySet=>entitySet?.entityType)),(0,rxjs_interop.pQ)()).subscribe((entityType=>{this.entityType=entityType}))}get slicers(){return this.slicers$.value}set slicers(value){this.slicers$.next(value)}get highlight(){return this.searchControl.value}writeValue(obj){obj&&(this.slicers=obj)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){}setDisabledState(isDisabled){this.isDisabled=isDisabled}onSlicersChange(){this.valueChange.emit(this.slicers),this.onChange?.(this.slicers)}openSlicerBar(event){var _this=this;return(0,asyncToGenerator.A)((function*(){const slicer=yield(0,firstValueFrom._)(_this._dialog.open(slicer_bar_component.H,{data:{value:_this.slicers,entityType:_this.entityType,dataSettings:(0,pick.A)(_this.dataSettings,["dataSource","entitySet"])}}).afterClosed());slicer&&(_this.slicers=[...slicer],_this.onSlicersChange())}))()}update(value,index){const values=[...this.slicers];values[index]=value,this.slicers=values,this.onSlicersChange()}remove(index){const values=[...this.slicers];values.splice(index,1),this.slicers=values,this.onSlicersChange()}addSlicer(slicer){var _this2=this;return(0,asyncToGenerator.A)((function*(){_this2.slicers=_this2.slicers??[];const index=_this2.slicers.findIndex((item=>slicer.dimension&&(0,src.hmx)(item.dimension)===(0,src.hmx)(slicer.dimension)));index>-1?_this2.update(slicer,index):(_this2.slicers=[..._this2.slicers,slicer],_this2.onSlicersChange())}))()}static#_=this.propDecorators={slicers:[{type:core.Input}],inline:[{type:core.Input,args:[{isSignal:!0,alias:"inline",required:!1,transform:void 0}]}],limit:[{type:core.Input,args:[{isSignal:!0,alias:"limit",required:!1,transform:void 0}]}],capacities:[{type:core.Input,args:[{isSignal:!0,alias:"capacities",required:!1,transform:void 0}]}],valueChange:[{type:core.Output,args:["valueChange"]}]}};SlicersComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ngm-slicers",template:'@for (slicer of slicers$ | async; track slicer; let i = $index) {\n  <ngm-slicer [slicer]="slicer"\n    [dataSettings]="dataSettings"\n    [entityType]="entityType"\n    [editable]="editable()"\n    [disabled]="isDisabled"\n    [limit]="limit()"\n    (slicerChange)="update($event, i)"\n    (removed)="remove(i)"\n  />\n  <mat-divider></mat-divider>\n}\n\n@if (editable() && !inline()) {\n  <button mat-button [disabled]="isDisabled" color="primary" displayDensity="cosy" ngmAppearance="dashed"\n    (click)="openSlicerBar($event)">\n    <mat-icon>edit</mat-icon>{{ \'Ngm.Common.Add\' | translate: {Default: "Add"} }}\n  </button>\n}\n\n@if (editable() && inline()) {\n  <button mat-stroked-button [disabled]="isDisabled" displayDensity="cosy" ngmAppearance="dashed"\n    [cdkMenuTriggerFor]="menu"\n  >\n    <div class="flex items-center justify-center">\n      <mat-icon>add</mat-icon>\n      {{ \'Ngm.Common.Add\' | translate: {Default: "Add"} }}\n    </div>\n  </button>\n}\n\n<ng-template #menu>\n  <div cdkMenu class="cdk-menu__large">\n    <ngm-search class="px-1 rounded-2xl" [formControl]="searchControl"\n      (click)="$event.stopPropagation()" />\n\n    @if (showVariable()) {\n      @for (property of variables$ | async; track property.name) {\n        <button cdkMenuItem (click)="openSlicerCreator(property)">\n          <ngm-entity-property class="w-full" [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n            [highlight]="highlight" />\n        </button>\n      }\n    }\n  \n    @for (property of dimensions$ | async; track property.name) {\n      @if (isSemanticCalendar(property)) {\n        <button cdkMenuItem (click)="openSlicerCreator(property)"\n          [cdkMenuTriggerFor]="calendarMenu"\n          [cdkMenuTriggerData]="{property: property}"\n        >\n          <ngm-entity-property class="w-full" [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n            [highlight]="highlight" />\n        </button>\n      } @else {\n        <button cdkMenuItem class="w-full" (click)="openSlicerCreator(property)">\n          <ngm-entity-property class="w-full" [property]="property" [displayBehaviour]="DisplayBehaviour.auto"\n            [highlight]="highlight" />\n        </button>\n      }\n    }\n  \n    @if (showCombinationSlicer()) {\n      <button cdkMenuItem (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.CombinationSlicer)">\n        <mat-icon>tune</mat-icon>\n        {{ \'Ngm.Selection.CombinationSlicer\' | translate: {Default: "Combination Slicer"} }}\n      </button>\n    }\n    @if (showAdvancedSlicer()) {\n      <button cdkMenuItem (click)="$event.preventDefault();openSlicerCreator(SlicersCapacity.AdvancedSlicer)">\n        <mat-icon>data_array</mat-icon>\n        {{ \'Ngm.Selection.AdvancedSlicer\' | translate: {Default: \'Advanced Slicer\'} }}\n      </button>\n    }\n  </div>\n</ng-template>\n\n<ng-template #calendarMenu let-property="property">\n  <div cdkMenu class="cdk-menu__medium">\n    <button cdkMenuItem (click)="openValueHelp(property)">\n      <mat-icon fontSet="material-icons-outlined">people_outline</mat-icon>\n      {{ \'Ngm.Selection.DimensionMembers\' | translate: {Default: \'Dimension Members\'} }}\n    </button>\n    \n    @for (variable of dateVariables; track variable.id) {\n      <button cdkMenuItem class=""\n        (click)="openDynamicDateHelp(property, variable.dateRange)">\n        {{ \'DateVariable.\' + variable.id | translate: {Default: variable.id} }}\n      </button>\n    }\n  </div>\n</ng-template>\n',inputs:["dataSettings"],providers:[{provide:fesm2022_forms.kq,multi:!0,useExisting:(0,core.forwardRef)((()=>SlicersComponent))}],styles:[slicers_componentngResource_default()]})],SlicersComponent)},"./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>NgmTimeFilterEditorComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var time_filter_editor_componentngResource=__webpack_require__("./packages/angular/selection/timer/time-filter-editor/time-filter-editor.component.scss?ngResource"),time_filter_editor_componentngResource_default=__webpack_require__.n(time_filter_editor_componentngResource),drag_drop=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),expansion=__webpack_require__("./node_modules/@angular/material/fesm2022/expansion.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),core_service=__webpack_require__("./packages/angular/core/services/core.service.ts"),core_module=__webpack_require__("./packages/angular/core/core.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");let NgmTimeFilterEditorComponent=class NgmTimeFilterEditorComponent{get entityType(){return this.entityType$.value}set entityType(value){this.entityType$.next(value)}constructor(coreService,formBuilder){this.coreService=coreService,this.formBuilder=formBuilder,this.isDialogContainer=!0,this.data=(0,core.inject)(dialog.Vh,{optional:!0}),this._dialogRef=(0,core.inject)(dialog.CP,{optional:!0}),this.entityType$=new BehaviorSubject.t(null),this.formGroup=new fesm2022_forms.gE({dimension:new fesm2022_forms.gE({dimension:new fesm2022_forms.MJ(null),hierarchy:new fesm2022_forms.MJ(null)}),currentDate:new fesm2022_forms.MJ,ranges:new fesm2022_forms.Yp([]),allowModifySelections:new fesm2022_forms.MJ(null),selctionType:new fesm2022_forms.MJ}),this.property$=(0,combineLatest.z)([this.entityType$,this.formGroup.get("dimension").get("dimension").valueChanges.pipe((0,startWith.Z)(this.formGroup.value.dimension?.dimension))]).pipe((0,map.T)((([entityType,dimension])=>(0,src.jZc)(entityType,dimension))),(0,shareReplay.t)(1)),this.hierarchies$=this.property$.pipe((0,map.T)((property=>property?.hierarchies))),this.forControl=!1,this.property$.subscribe()}ngOnInit(){if(this.data){this.entityType=this.data.entityType;const current=this.coreService.execDateVariables(this.data.slicer.currentDate);this.data.slicer.ranges.forEach((range=>{const currentPeriod=(0,src.zhb)(current,range),result=(0,src.XxF)(current,range);this.ranges.push(this.buildRangeForm({...range,currentPeriod,result}))})),this.formGroup.patchValue(this.data.slicer),this.forControl=this.data.forControl}this.formGroup.valueChanges.subscribe((value=>{try{const current=this.coreService.execDateVariables(value.currentDate);value.ranges.forEach(((range,i)=>{const currentPeriod=(0,src.zhb)(current,range),result=(0,src.XxF)(current,range);this.ranges.controls[i].patchValue({currentPeriod,result},{emitEvent:!1})}))}catch(err){console.warn(err)}}))}buildRangeForm(range){const form=this.formBuilder.group({type:new fesm2022_forms.MJ,granularity:new fesm2022_forms.MJ,current:new fesm2022_forms.gE({direction:new fesm2022_forms.MJ,granularity:new fesm2022_forms.MJ,amount:new fesm2022_forms.MJ}),lookBack:new fesm2022_forms.MJ,lookAhead:new fesm2022_forms.MJ,currentPeriod:new fesm2022_forms.MJ({value:null,disabled:!0}),formatter:new fesm2022_forms.MJ,result:new fesm2022_forms.MJ});return range&&form.patchValue(range),form}get ranges(){return this.formGroup.get("ranges")}addRange(event){this.ranges.push(this.buildRangeForm()),event?.preventDefault()}onApply(){this._dialogRef.close({...this.formGroup.value})}static#_=this.ctorParameters=()=>[{type:core_service.s},{type:fesm2022_forms.ok}];static#_2=this.propDecorators={isDialogContainer:[{type:core.HostBinding,args:["class.ngm-dialog-container"]}],entityType:[{type:core.Input}]}};NgmTimeFilterEditorComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,ngx_translate_core.h,fesm2022_forms.X1,drag_drop.ad,dialog.hM,form_field.RG,fesm2022_select.Ve,expansion.MY,icon.m_,divider.w,input.fS,fesm2022_button.Hl,core_module.T],changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-time-filter-editor",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n  <h4 style="pointer-events: none;" *ngIf="property$ | async as property">\n    {{ \'Ngm.TimeFilter.SET_DATE_RANGE\' | translate: {Default: "Set Date Range for {{property.caption}}", property: property.caption} }}\n  </h4>\n</header>\n\n<div mat-dialog-content [formGroup]="formGroup">\n  <div class="ngm-timer-editor__header" >\n    <mat-form-field appearance="fill">\n      <mat-label>{{ \'Ngm.TimeFilter.CURRENT_DATE\' | translate: {Default: "Current Date"} }}</mat-label>\n      <mat-select formControlName="currentDate">\n        <mat-option value="SYSTEMTIME">{{ \'Ngm.TimeFilter.SYSTEM_DATE\' | translate: {Default: "System Date"} }}</mat-option>\n        <mat-option value="TODAY">{{ \'Ngm.TimeFilter.USER_CURRENT_DATE\' | translate: {Default: "User Current Date"} }}</mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <ng-container *ngIf="hierarchies$ | async as hierarchies">\n      <mat-form-field appearance="fill" formGroupName="dimension">\n        <mat-label>{{ \'Ngm.Common.Hierarchy\' | translate: {Default: "Hierarchy"} }}</mat-label>\n        <mat-select formControlName="hierarchy">\n          <mat-option *ngFor="let hierarchy of hierarchies" [value]="hierarchy.name">{{hierarchy.caption}}</mat-option>\n        </mat-select>\n      </mat-form-field>\n    </ng-container>\n\n  </div>\n\n  <mat-accordion hideToggle formArrayName="ranges" displayDensity="cosy" class="">\n    <mat-expansion-panel *ngFor="let range of ranges.controls; let i = index;" [formGroupName]="i">\n      <mat-expansion-panel-header class="pr-0">\n        <mat-panel-title>\n          {{ \'Ngm.TimeFilter.RANGE\' | translate: {Default: "Range"} }} {{i + 1}}: {{range.value.result?.[0]}} - {{range.value.result?.[1]}}\n        </mat-panel-title>\n        <mat-panel-description class="">\n          <button mat-icon-button ngmAppearance="danger" (click)="ranges.controls.splice(i, 1)">\n            <mat-icon>close</mat-icon>\n          </button>\n        </mat-panel-description>\n      </mat-expansion-panel-header>\n \n        <div class="flex flex-wrap gap-2">\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.RANGE_TYPE\' | translate: {Default: "Range Type"} }}</mat-label>\n            <mat-select formControlName="type" >\n              <mat-option value="Standard">\n                {{ \'Ngm.TimeFilter.RANGE_TYPE_STANDARD\' | translate: {Default: "Standard"} }}\n              </mat-option>\n              <mat-option value="Offset">\n                {{ \'Ngm.TimeFilter.RANGE_TYPE_OFFSET\' | translate: {Default: "Offset"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.GRANULARITY\' | translate: {Default: "Granularity"} }}</mat-label>\n            <mat-select formControlName="granularity">\n              <mat-option value="Year">\n                {{ \'Ngm.TimeFilter.YEAR\' | translate: {Default: "Year"} }}\n              </mat-option>\n              <mat-option value="Quarter">\n                {{ \'Ngm.TimeFilter.QUARTER\' | translate: {Default: "Quarter"} }}\n              </mat-option>\n              <mat-option value="Month">\n                {{ \'Ngm.TimeFilter.MONTH\' | translate: {Default: "Month"} }}\n              </mat-option>\n              <mat-option value="Week">\n                {{ \'Ngm.TimeFilter.WEEK\' | translate: {Default: "Week"} }}\n              </mat-option>\n              <mat-option value="Day">\n                {{ \'Ngm.TimeFilter.DAY\' | translate: {Default: "Day"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.LOOK_BACK\' | translate: {Default: "Look Back"} }}</mat-label>\n            <input matInput formControlName="lookBack" type="number">\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.CURRENT_PERIOD\' | translate: {Default: "Current Period"} }}</mat-label>\n            <input matInput formControlName="currentPeriod" >\n          </mat-form-field>\n    \n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.LOOK_AHEAD\' | translate: {Default: "Look Ahead"} }}</mat-label>\n            <input matInput formControlName="lookAhead" type="number">\n          </mat-form-field>\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.FORMATTER\' | translate: {Default: "Formatter"} }}</mat-label>\n            <input matInput formControlName="formatter" type="string">\n          </mat-form-field>\n        </div>\n\n        <div *ngIf="range.value.type===\'Offset\'" formGroupName="current" class="flex flex-wrap gap-2">\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.OFFSET_DIRECTION\' | translate: {Default: "Offset Direction"} }}</mat-label>\n            <mat-select formControlName="direction">\n              <mat-option value="LookBack">\n                {{ \'Ngm.TimeFilter.LOOK_BACK\' | translate: {Default: "Look Back"} }}\n              </mat-option>\n              <mat-option value="LookAhead">\n                {{ \'Ngm.TimeFilter.LOOK_AHEAD\' | translate: {Default: "Look Ahead"} }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill" >\n            <mat-label>{{ \'Ngm.TimeFilter.GRANULARITY\' | translate: {Default: "Granularity"} }}</mat-label>\n            <mat-select formControlName="granularity">\n              <mat-option [value]="range.value.granularity">{{range.value.granularity}}</mat-option>\n            </mat-select>\n          </mat-form-field>\n\n          <mat-form-field appearance="fill">\n            <mat-label>{{ \'Ngm.TimeFilter.OFFSET_AMOUNT\' | translate: {Default: "Offset Amount"} }}</mat-label>\n            <input matInput formControlName="amount" type="number">\n          </mat-form-field>\n        </div>\n      \n    </mat-expansion-panel>\n  </mat-accordion>\n\n  <button mat-stroked-button class="ngm-timer-editor__add" color="primary" ngmAppearance="dashed" (click)="addRange($event)">\n    <mat-icon>add</mat-icon>{{ \'Ngm.TimeFilter.ADD_TIME_RANGE\' | translate: {Default: "Add Time Range"} }}\n  </button>\n\n  <div class="flex-1"></div>\n\n  <div *ngIf="forControl" class="flex flex-col">\n    <mat-divider></mat-divider>\n    <div>{{ \'Ngm.TimeFilter.SETTINGS_FOR_USERS\' | translate: {Default: "Settings for Users"} }}</div>\n    <mat-checkbox formControlName="allowModifySelections">\n      {{ \'Ngm.TimeFilter.ALLOW_MODIFY_SELECTIONS\' | translate: {Default: "Allow viewers to modify selections"} }}\n    </mat-checkbox>\n    <mat-form-field appearance="fill">\n      <mat-label>{{ \'Ngm.TimeFilter.SELECTION_TYPE\' | translate: {Default: "Selection Type"} }}</mat-label>\n      <mat-select formControlName="selctionType">\n        <mat-option value="Multiple">\n          {{ \'Ngm.TimeFilter.SELECTION_TYPE_MULTIPLE\' | translate: {Default: "Multiple"} }}\n        </mat-option>\n        <mat-option value="Single">\n          {{ \'Ngm.TimeFilter.SELECTION_TYPE_SINGLE\' | translate: {Default: "Single"} }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n\n</div>\n\n<div mat-dialog-actions align="end">\n  <div ngmButtonGroup>\n    <button mat-button mat-dialog-close>\n      {{ \'Ngm.Common.Cancel\' | translate: {Default: "Cancel"} }}\n    </button>\n    <button mat-raised-button color="accent" (click)="onApply()" cdkFocusInitial>\n      {{ \'Ngm.Common.Apply\' | translate: {Default: "Apply"} }}\n    </button>\n  </div>\n</div>\n',styles:[time_filter_editor_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[core_service.s,fesm2022_forms.ok])],NgmTimeFilterEditorComponent)},"./packages/angular/selection/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GH:()=>SlicersCapacity});new(__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs").InjectionToken)("ngm-selection-default-options",{providedIn:"root",factory:function NX_SELECTION_DEFAULT_OPTIONS_FACTORY(){return{maxTagCount:5,paging:!1,tableOptions:{paging:!0}}}});var SlicersCapacity;!function(SlicersCapacity){SlicersCapacity.CombinationSlicer="CombinationSlicer",SlicersCapacity.AdvancedSlicer="AdvancedSlicer",SlicersCapacity.Variable="Variable"}(SlicersCapacity||(SlicersCapacity={}))}}]);