(self.webpackChunkxpert_ai=self.webpackChunkxpert_ai||[]).push([[9961],{"./packages/angular/entity/formatting/formatting.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n    overflow: hidden\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/entity/property-select/property-select.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  flex: 1 1 0%;\n  flex-direction: column;\n  --ngm-property-select-container-bg-color: var(--ngm-color-surface-container-high);\n  --ngm-property-select-container-ring-offset-color: var(--ngm-color-surface-container);\n}\n\n.ngm-property-select__create-calculation {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.select-container {\n  background-color: var(--ngm-property-select-container-bg-color);\n}\n.select-container:hover {\n  --tw-ring-offset-color: var(--ngm-property-select-container-ring-offset-color);\n}\n\n.mat-error {\n  color: var(--mat-form-field-error-text-color);\n}\n\n::ng-deep .ngm-property-select__parameter-menu .mat-mdc-menu-item .mat-mdc-menu-item-text {\n  display: flex;\n  align-items: center;\n}\n::ng-deep .ngm-property-select__panel .mat-mdc-option.ngm-option__dimension,\n::ng-deep .ngm-property-select__panel .mat-mdc-option.ngm-option__hierarchy,\n::ng-deep .ngm-property-select__panel .mat-mdc-option.ngm-option__measure {\n  padding-left: 16px;\n}\n::ng-deep .ngm-property-select__panel .ngm-option__hidden {\n  display: none;\n  visibility: hidden;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/entity/property/property.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  overflow: hidden;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/parameter/parameter-create/parameter-create.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,":host, :host.mat-mdc-dialog-component-host {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  max-width: 100%;\n}\n\n.mat-radio-button {\n  margin-right: 1rem;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./packages/angular/common/select/select.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>NgmSelectModule});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),_select_select_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/common/select/select/select.component.ts"),_input_option_content__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/common/input/option-content.ts"),_mat_select_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/angular/common/select/mat/select.component.ts");let NgmSelectModule=class NgmSelectModule{};NgmSelectModule=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule,_input_option_content__WEBPACK_IMPORTED_MODULE_3__.r,_select_select_component__WEBPACK_IMPORTED_MODULE_4__.O,_mat_select_component__WEBPACK_IMPORTED_MODULE_5__.k],exports:[_input_option_content__WEBPACK_IMPORTED_MODULE_3__.r,_select_select_component__WEBPACK_IMPORTED_MODULE_4__.O,_mat_select_component__WEBPACK_IMPORTED_MODULE_5__.k]})],NgmSelectModule)},"./packages/angular/entity/formatting/formatting.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>NgmFormattingComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var formatting_componentngResource=__webpack_require__("./packages/angular/entity/formatting/formatting.component.scss?ngResource"),formatting_componentngResource_default=__webpack_require__.n(formatting_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),tooltip=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),select_module=__webpack_require__("./packages/angular/common/select/select.module.ts"),displayDensity=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),property_component=__webpack_require__("./packages/angular/entity/property/property.component.ts"),slide_toggle=__webpack_require__("./node_modules/@angular/material/fesm2022/slide-toggle.mjs");let NgmFormattingComponent=class NgmFormattingComponent{constructor(){this.data=(0,core.inject)(dialog.Vh),this.dialogRef=(0,core.inject)(dialog.CP),this.formGroup=new fesm2022_forms.gE({shortNumber:new fesm2022_forms.MJ(!1),decimal:new fesm2022_forms.MJ(null),unit:new fesm2022_forms.MJ(null),useUnderlyingUnit:new fesm2022_forms.MJ(!1),digitsInfo:new fesm2022_forms.MJ(null)})}ngOnInit(){this.data&&this.formGroup.patchValue(this.data)}onApply(){this.dialogRef.close(this.formGroup.value)}};NgmFormattingComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,fesm2022_forms.X1,ngx_translate_core.h,fesm2022_button.Hl,icon.m_,tooltip.uc,dialog.hM,slide_toggle.mV,common_module.y,select_module.F,displayDensity.sP,property_component.G5],selector:"ngm-formatting",template:'<header mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <h4 style="pointer-events: none;">\n        {{ \'Ngm.Entity.MeasureFormatting\' | translate: {Default: "Measure Formatting"} }}\n    </h4>\n</header>\n\n<mat-dialog-content class="mat-typography">\n    <form [formGroup]="formGroup" class="flex flex-col justify-start items-stretch gap-2">\n        <mat-slide-toggle formControlName="shortNumber">\n            {{ \'Ngm.Entity.ShortNumber\' | translate: {Default: "Short Number"} }}\n        </mat-slide-toggle>\n\n        <ngm-slider-input [label]="\'Ngm.Entity.Decimals\' | translate: {Default: \'Decimals\'}"\n            formControlName="decimal"\n            color="accent"\n            [max]="10"\n        >\n        </ngm-slider-input>\n        <ngm-input [label]="\'Ngm.Entity.DigitsInfo\' | translate: {Default: \'Digits Info\'}"\n            formControlName="digitsInfo"\n        ></ngm-input>\n        <ngm-input [label]="\'Ngm.Entity.Unit\' | translate: {Default: \'Unit\'}" formControlName="unit"></ngm-input>\n\n        \x3c!-- 暂不支持 <mat-checkbox formControlName="useUnderlyingUnit">\n            {{ \'Ngm.Entity.UseUnderlyingUnit\' | translate: {Default: "Use Underlying Unit"} }}\n        </mat-checkbox> --\x3e\n        \n    </form>\n</mat-dialog-content>\n\n<mat-dialog-actions align="end">\n    <div ngmButtonGroup>\n        <button mat-button mat-dialog-close>\n            {{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}\n        </button>\n        <button mat-raised-button color="accent" cdkFocusInitial (click)="onApply()">\n            {{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}\n        </button>\n    </div>\n</mat-dialog-actions>\n',host:{class:"ngm-dialog-container"},styles:[formatting_componentngResource_default()]})],NgmFormattingComponent)},"./packages/angular/entity/property-select/property-select.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>NgmPropertySelectComponent});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var property_select_componentngResource=__webpack_require__("./packages/angular/entity/property-select/property-select.component.scss?ngResource"),property_select_componentngResource_default=__webpack_require__.n(property_select_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),src=__webpack_require__("./packages/core/src/index.ts"),isEqual=__webpack_require__("./node_modules/lodash-es/isEqual.js"),negate=__webpack_require__("./node_modules/lodash-es/negate.js"),isNil=__webpack_require__("./node_modules/lodash-es/isNil.js"),isEmpty=__webpack_require__("./node_modules/lodash-es/isEmpty.js"),includes=__webpack_require__("./node_modules/lodash-es/includes.js"),isString=__webpack_require__("./node_modules/lodash-es/isString.js"),uniq=__webpack_require__("./node_modules/lodash-es/uniq.js"),cloneDeep=__webpack_require__("./node_modules/lodash-es/cloneDeep.js"),pick=__webpack_require__("./node_modules/lodash-es/pick.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),firstValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),combineLatestWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),fesm2022_select=__webpack_require__("./node_modules/@angular/material/fesm2022/select.mjs"),displayDensity=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),core_service=__webpack_require__("./packages/angular/core/services/core.service.ts"),value_help_component=__webpack_require__("./packages/angular/controls/value-help/value-help.component.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),menu=__webpack_require__("./node_modules/@angular/material/fesm2022/menu.mjs"),fesm2022_radio=__webpack_require__("./node_modules/@angular/material/fesm2022/radio.mjs"),divider=__webpack_require__("./node_modules/@angular/material/fesm2022/divider.mjs"),list=__webpack_require__("./node_modules/@angular/material/fesm2022/list.mjs"),fesm2022_checkbox=__webpack_require__("./node_modules/@angular/material/fesm2022/checkbox.mjs"),badge=__webpack_require__("./node_modules/@angular/material/fesm2022/badge.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),parameter_create_component=__webpack_require__("./packages/angular/parameter/parameter-create/parameter-create.component.ts"),progress_spinner=__webpack_require__("./node_modules/@angular/material/fesm2022/progress-spinner.mjs"),types=__webpack_require__("./packages/angular/entity/types.ts"),property_component=__webpack_require__("./packages/angular/entity/property/property.component.ts"),formatting_component=__webpack_require__("./packages/angular/entity/formatting/formatting.component.ts");let NgmPropertySelectComponent=class NgmPropertySelectComponent{#translate;get search(){return this.searchControl.value}#value;#dataSettings;#entityType;get caption(){return this.formGroup.get("caption").value}set caption(value){this.formGroup.patchValue({caption:value})}get dimensionControl(){return this.formGroup.get("dimension")}get hierarchyControl(){return this.formGroup.get("hierarchy")}get hierarchy(){return this.hierarchyControl.value}set hierarchy(value){this.formGroup.patchValue({hierarchy:value})}get level(){return this.formGroup.value.level}set level(value){this.formGroup.patchValue({level:value})}get exclude(){return this.formGroup.value.exclude}set exclude(exclude){this.formGroup.patchValue({exclude})}get members(){return this.formGroup.value.members}set members(value){this.formGroup.patchValue({members:value})}get properties(){return this.formGroup.value.properties}set properties(value){this.formGroup.patchValue({properties:value})}get memberCaption(){return this.formGroup.value.memberCaption}set memberCaption(memberCaption){this.formGroup.patchValue({memberCaption})}get displayHierarchy(){return this.formGroup.value.displayHierarchy}set displayHierarchy(value){this.formGroup.patchValue({displayHierarchy:value})}get displayBehaviour(){return this.formGroup.value.displayBehaviour}set displayBehaviour(value){this.formGroup.patchValue({displayBehaviour:value})}get unbookedData(){return this.formGroup.value.unbookedData}set unbookedData(value){this.formGroup.patchValue({unbookedData:value})}get zeroSuppression(){return this.formGroup.value.zeroSuppression}set zeroSuppression(value){this.formGroup.patchValue({zeroSuppression:value})}get parameter(){return this.formGroup.value.parameter}set parameter(value){this.formGroup.patchValue({parameter:value})}get order(){return this.formGroup.value.order}set order(value){this.formGroup.patchValue({order:value})}#dimensionEffect;constructor(){this.AggregationRole=src.H$f,this.DISPLAY_BEHAVIOUR=src.Y$2,this.DisplayDensity=displayDensity.X4,this.CalculationType=src.ASJ,this.isVisible=src.zNq,this.LevelType=src.zqw,this.isPropertySelect=!0,this._dialog=(0,core.inject)(dialog.bZ,{optional:!0}),this._viewContainerRef=(0,core.inject)(core.ViewContainerRef,{skipSelf:!0}),this._destroyRef=(0,core.inject)(core.DestroyRef),this.#translate=(0,core.inject)(ngx_translate_core.c$),this.coreService=(0,core.inject)(core_service.s),this.DISPLAY_BEHAVIOUR_LIST=[{value:null,label:"Auto"},{value:"descriptionAndId",label:"Description and ID"},{value:"descriptionOnly",label:"Description Only"},{value:"idOnly",label:"ID Only"}],this.label=(0,core.input)(),this.capacities=(0,core.input)(),this.required=(0,core.input)(!1,{transform:core.booleanAttribute}),this.editable=(0,core.input)(!1,{transform:core.booleanAttribute}),this.showAttributes=(0,core.input)(!1,{transform:core.booleanAttribute}),this.dataSettings=(0,core.input)(),this.dataSettings$=(0,rxjs_interop.br)(this.dataSettings),this.entityType=(0,core.input)(),this.restrictedDimensions=(0,core.input)(),this.restrictedDimensions$=(0,rxjs_interop.br)(this.restrictedDimensions),this.dsCoreService=(0,core.input)(),this.syntax=(0,core.input)(),this.disabled=(0,core.input)(!1,{transform:core.booleanAttribute}),this.displayDensity=(0,core.input)(null),this.valueChange=new core.EventEmitter,this.calculationChange=new core.EventEmitter,this.keyControl=new fesm2022_forms.MJ,this.formGroup=new fesm2022_forms.gE({name:new fesm2022_forms.MJ(null),caption:new fesm2022_forms.MJ(null),dimension:new fesm2022_forms.MJ(null),hierarchy:new fesm2022_forms.MJ(null),level:new fesm2022_forms.MJ(null),exclude:new fesm2022_forms.MJ(null),members:new fesm2022_forms.MJ(null),measure:new fesm2022_forms.MJ(null),properties:new fesm2022_forms.MJ,memberCaption:new fesm2022_forms.MJ(null),displayBehaviour:new fesm2022_forms.MJ(null),displayHierarchy:new fesm2022_forms.MJ(null),unbookedData:new fesm2022_forms.MJ(null),zeroSuppression:new fesm2022_forms.MJ(!0),formatting:new fesm2022_forms.MJ,parameter:new fesm2022_forms.MJ,order:new fesm2022_forms.MJ(null)}),this._formValue=this.formGroup.value,this.searchControl=new fesm2022_forms.MJ(null),this._disabled=(0,core.signal)(!1),this.#value=null,this.#dataSettings=(0,core.computed)((()=>({dataSource:this.dataSettings()?.dataSource,entitySet:this.dataSettings()?.entitySet})),{equal:isEqual.A}),this.entityTypeLoading=(0,core.signal)(!1),this.entityTypeError=(0,core.signal)(""),this.#entityType=(0,rxjs_interop.ot)(this.dataSettings$.pipe((0,map.T)((dataSettings=>({dataSource:dataSettings?.dataSource,entitySet:dataSettings?.entitySet}))),(0,distinctUntilChanged.F)(isEqual.A),(0,switchMap.n)((dataSettings=>dataSettings.dataSource&&dataSettings.entitySet&&this.dsCoreService()?(this.entityTypeError.set(""),this.entityTypeLoading.set(!0),this.dsCoreService().getDataSource(dataSettings.dataSource).pipe((0,switchMap.n)((dataSource=>dataSource.selectEntitySet(dataSettings.entitySet))),(0,map.T)((entitySet=>(this.entityTypeLoading.set(!1),(0,src.W9i)(entitySet)?entitySet.entityType:(this.entityTypeError.set(entitySet.message),null)))))):(0,of.of)(null))))),this._entityType=(0,core.computed)((()=>this.entityType()??this.#entityType())),this.entityType$=(0,rxjs_interop.br)(this._entityType),this.entityProperties$=this.entityType$.pipe((0,filter.p)((0,negate.A)(isNil.A)),(0,map.T)((entityType=>{const properties=Object.values(entityType.properties);if(this.capacities()?.includes(types.w.MeasureGroup)){const caption=this.getTranslation("Ngm.Property.MeasureGroup",{Default:"Measure Group"});properties.push({name:src.mpi,caption,role:src.H$f.dimension})}return properties.push(...Object.values(entityType.parameters||{})),properties})),(0,shareReplay.t)(1)),this.entityProperties=(0,rxjs_interop.ot)(this.entityProperties$),this.parameters$=this.entityType$.pipe((0,map.T)((entityType=>Object.values(entityType?.parameters||{})))),this.dimensions$=(0,combineLatest.z)([this.entityProperties$,this.restrictedDimensions$.pipe((0,distinctUntilChanged.F)())]).pipe((0,map.T)((([properties,restrictedDimensions])=>{const options=[];return properties.filter((item=>item.role===src.H$f.dimension&&(!!(0,isEmpty.A)(restrictedDimensions)||(0,includes.A)(restrictedDimensions,item.name))&&(0,src.zNq)(item))).forEach((dimension=>{options.push(dimension),dimension.hierarchies?.forEach((hierarchy=>{hierarchy.name!==dimension.name&&options.push(hierarchy);const levels=hierarchy.levels?.filter((level=>level.levelType!==src.zqw.ALL));levels?.length>1?levels.forEach((level=>{options.push(level)})):levels.forEach((level=>{options.push({...level,visible:!1})}))}))})),options})),(0,combineLatestWith.v)(this.searchControl.valueChanges.pipe((0,startWith.Z)(""))),(0,map.T)((([options,search])=>filterProperty(options,search))),(0,shareReplay.t)(1)),this.property$=new BehaviorSubject.t(null),this.property=(0,rxjs_interop.ot)(this.property$),this.hierarchies$=this.property$.pipe((0,map.T)((dimension=>dimension?.hierarchies?.filter(src.zNq))),(0,shareReplay.t)(1)),this.hierarchy$=(0,combineLatest.z)([this.hierarchies$,this.hierarchyControl.valueChanges.pipe((0,startWith.Z)(null))]).pipe((0,map.T)((([properties,hierarchy])=>properties?.find((prop=>hierarchy?prop.name===hierarchy:prop.name===prop.dimension)))),(0,shareReplay.t)(1)),this.levels$=this.hierarchy$.pipe((0,map.T)((hierarchy=>hierarchy?.levels?.filter(src.zNq))),(0,shareReplay.t)(1)),this.level$=(0,combineLatest.z)([this.levels$,this.formGroup.get("level").valueChanges]).pipe((0,map.T)((([properties,level])=>properties?.find((prop=>prop.name===level))))),this.properties$=this.level$.pipe((0,map.T)((level=>{const options=[{name:src.lB.DESCRIPTION,caption:"DESCRIPTION"}];return options.push(...level?.properties??[]),options}))),this.labels$=this.properties$.pipe((0,map.T)((properties=>properties?.length?properties:null))),this.measures$=this.entityType$.pipe((0,filter.p)((0,negate.A)(isNil.A)),(0,map.T)(src.x20),(0,map.T)((measures=>measures.filter((property=>(0,isNil.A)(property.visible)||property.visible)))),(0,combineLatestWith.v)(this.searchControl.valueChanges.pipe((0,startWith.Z)(""))),(0,map.T)((([measures,text])=>filterProperty(measures,text)))),this.notCalculations$=this.measures$.pipe((0,map.T)((measures=>measures.filter((0,negate.A)(src.nc$))))),this.measures=(0,rxjs_interop.ot)(this.measures$,{initialValue:[]}),this.calculations=(0,core.computed)((()=>this.measures().filter((property=>(0,src.nc$)(property)&&(0,negate.A)(src.Bp3)(property))))),this.measureControls=(0,core.computed)((()=>this.calculations().filter(src.pIX))),this.isMeasure$=this.property$.pipe((0,map.T)((property=>property?.role===src.H$f.measure||property?.name===src.mpi))),this.isMeasure=(0,core.computed)((()=>this.property()?.role===src.H$f.measure||this.property()?.name===src.mpi)),this.calculationProperty=(0,core.computed)((()=>{const property=this.property();return(0,src.nc$)(property)&&!(0,src.Bp3)(property)?property:null})),this.isParameter=(0,core.computed)((()=>(0,src.fXE)(this.property()))),this.isVariable=(0,core.computed)((()=>(0,src.IXq)(this.property()))),this.isDimension=(0,core.computed)((()=>this.property()?.role===src.H$f.dimension)),this.showDisplayAs=(0,core.computed)((()=>this.isDimension()||this.isVariable()||this.isParameter()&&this.property().paramType===src.Yvx.Dimensions)),this.indicators$=this.measures$.pipe((0,map.T)((calculations=>calculations?.filter(src.Bp3)||[]))),this._members=(0,rxjs_interop.ot)(this.formGroup.get("members").valueChanges.pipe((0,startWith.Z)([]))),this.membersSignal=(0,core.computed)((()=>this.isMeasure()?(0,src.x20)(this.entityType()).map((property=>({...property,selected:this._members()?.some((member=>member===property.name))}))):null)),this.label$=(0,combineLatest.z)([this.entityType$,this.formGroup.valueChanges]).pipe((0,map.T)((([entityType,dimension])=>{if((0,src.txU)(dimension))return{icon:"straighten",label:dimension.measure?"Measure":"Measure Group"};const{icon,label}=(0,property_component.h2)((0,src.x6v)(entityType,dimension));return icon||label?{icon,label}:dimension.measure?(0,property_component.h2)((0,src.jZc)(entityType,dimension.measure)):{icon,label}}))),this.selectTrigger$=(0,combineLatest.z)([this.property$.pipe((0,startWith.Z)(null)),this.hierarchy$.pipe((0,startWith.Z)(null)),this.level$.pipe((0,startWith.Z)(null)),this.formGroup.get("members").valueChanges.pipe((0,startWith.Z)([])),this.formGroup.get("exclude").valueChanges.pipe((0,startWith.Z)(null)),this.formGroup.get("parameter").valueChanges.pipe((0,startWith.Z)(null)),this.formGroup.get("caption").valueChanges.pipe((0,startWith.Z)(null))]).pipe((0,map.T)((([dimension,hierarchy,level,members,exclude,parameter,caption])=>{let property=level??hierarchy??dimension??{};property={...property};const dimLabel=hierarchy?.caption||dimension?.caption||dimension?.name;return property.caption=(dimLabel??"")+(level?.caption?"/"+level.caption:level?.name?"/"+level.name:""),caption&&(property.caption=caption),parameter&&(property.caption+=`@${parameter}`),members?.length&&(property.caption=`${property.caption}:${exclude?" - ":""}${(0,isString.A)(members[0])?members[0]:members[0].caption||members[0].key}`,members.length>1&&(property.caption+=`(+${members.length-1})`)),property}))),this.selectTrigger=(0,rxjs_interop.ot)(this.selectTrigger$),this.dimension=(0,rxjs_interop.ot)(this.dimensionControl.valueChanges.pipe((0,startWith.Z)(null))),this.showDimension=(0,core.computed)((()=>this.capacities()?.includes(types.w.Dimension))),this.showMeasure=(0,core.computed)((()=>this.capacities()?.includes(types.w.Measure))),this.showParameter=(0,core.computed)((()=>this.capacities()?.includes(types.w.Parameter))),this.showMeasureControl=(0,core.computed)((()=>this.capacities()?.includes(types.w.MeasureControl))),this.showMeasureAttributes=(0,core.computed)((()=>this.capacities()?.includes(types.w.MeasureAttributes))),this.showOrder=(0,core.computed)((()=>this.capacities()?.includes(types.w.Order))),this.showMore=(0,core.signal)(!1),this.dimensionError=(0,core.signal)(""),this.error=(0,core.computed)((()=>this.dimensionError()||this.entityTypeError())),this.#dimensionEffect=(0,core.effect)((()=>{const dimension=this.dimension(),properties=this.entityProperties();if(dimension&&properties){const property=properties.find((prop=>prop.name===dimension));if(property)this.property$.next(property),this.dimensionError.set("");else{const entityType=this._entityType();this.dimensionError.set(this.getTranslation("Ngm.Property.DimensionNotFound",{dimension,cube:entityType?.name||"unknown",Default:`Dimension '${dimension}' not found in cube '${entityType?.name}'`}))}}}),{allowSignalWrites:!0}),this.keySub=(0,combineLatest.z)([this.entityType$,this.keyControl.valueChanges.pipe((0,distinctUntilChanged.F)())]).pipe((0,rxjs_interop.pQ)()).subscribe((([entityType,dimension])=>{const property=(0,src.x6v)(entityType,dimension);if((0,src.__U)(property))this.formGroup.setValue({...this._formValue,dimension});else{let hierarchy=null,level=null;if((0,src.iEe)(property)){const hierarchyName=property.defaultHierarchy||dimension;let hierarchyProperty=(0,src.dro)(entityType,{dimension,hierarchy:hierarchyName});hierarchyProperty||(hierarchyProperty=property.hierarchies[0]),hierarchy=hierarchyProperty?.name}(0,src.$cE)(property)&&(hierarchy=property.name,dimension=property.dimension),(0,src.UIL)(property)&&(level=property.name,hierarchy=property.hierarchy,dimension=property.dimension),this.formGroup.setValue({...this._formValue,dimension,hierarchy,level})}})),this.hierarchySub=this.hierarchyControl.valueChanges.pipe((0,distinctUntilChanged.F)(),(0,rxjs_interop.pQ)(this._destroyRef)).subscribe((()=>{this.formGroup.patchValue({level:null})})),(0,core.effect)((()=>{(0,isNil.A)(this.disabled())||this._disabled.set(this.disabled())}),{allowSignalWrites:!0})}writeValue(obj){this.#value=obj??{},obj&&!(0,isEqual.A)(this.#value,this.formGroup.value)&&(this.patchValue(this.#value),(0,src.txU)(obj)?this.keyControl.setValue(obj.measure,{emitEvent:!1}):(0,src.t56)(obj)&&this.keyControl.setValue(obj.level||obj.hierarchy||obj.dimension,{emitEvent:!1}))}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._disabled.set(isDisabled)}ngAfterViewInit(){this.patchValue(this.#value),this.formGroup.valueChanges.pipe((0,debounceTime.B)(100),(0,filter.p)((()=>!!this.property$.value)),(0,distinctUntilChanged.F)(isEqual.A),(0,rxjs_interop.pQ)(this._destroyRef)).subscribe((value=>{value=this.property$.value?.role===src.H$f.measure?{...value,dimension:src.mpi,measure:value.dimension}:{...value,hierarchy:value.hierarchy??value.dimension},this.valueChange.emit(value),this.onChange?.(value)}))}patchValue(value){(0,isString.A)(value)?this.formGroup.patchValue({dimension:value}):(0,src.txU)(value)?value.measure?(this.formGroup.patchValue({dimension:value.measure}),this.formGroup.patchValue({...value,dimension:value.measure})):value.dimension===src.mpi&&this.formGroup.patchValue({...value}):this.formGroup.patchValue(value)}trackByName(index,item){return item.name}filterLevels(hierarchy){const levels=hierarchy.levels?.filter(src.zNq).filter((level=>level.levelType!==src.zqw.ALL));return levels?.length>1?levels:[]}patchCalculationProperty(property){this.patchValue({dimension:src.mpi,measure:property.name}),this.property$.next({...this.property$.value,...property,role:src.H$f.measure})}toggleMember(name,checked){this.members=checked?(0,uniq.A)([...this.members||[],name]):this.members?.filter((item=>item!==name))}selectMembers(event){var _this=this;return(0,asyncToGenerator.A)((function*(){event.stopPropagation();const result=yield(0,firstValueFrom._)(_this._dialog.open(value_help_component.K,{viewContainerRef:_this._viewContainerRef,data:{dsCoreService:_this.dsCoreService(),dataSettings:_this.dataSettings(),dimension:(0,cloneDeep.A)((0,src.cJW)(_this.formGroup.value,"level")),slicer:{exclude:_this.exclude,members:_this.formGroup.value.members},options:{selectionType:src.dDN.Multiple,searchable:!0,initialLevel:1}}}).afterClosed());result&&(_this.members=result.members,_this.exclude=result.exclude)}))()}onCreateCalculation(event,calculationType){var _this2=this;return(0,asyncToGenerator.A)((function*(){event.preventDefault(),event.stopPropagation();const data={dataSettings:_this2.dataSettings(),entityType:_this2.entityType(),syntax:_this2.syntax(),dsCoreService:_this2.dsCoreService(),value:null};calculationType&&(data.value={calculationType}),_this2.coreService.openCalculation(data).subscribe((property=>{property&&(_this2.patchCalculationProperty(property),_this2.calculationChange.emit(property))}))}))()}openEditCalculation(calculationProperty){var _this3=this;return(0,asyncToGenerator.A)((function*(){const data={dsCoreService:_this3.dsCoreService(),dataSettings:_this3.dataSettings(),entityType:_this3.entityType(),value:calculationProperty,syntax:src.w4h.MDX};_this3.coreService.openCalculation(data).subscribe((property=>{property&&(_this3.patchCalculationProperty(property),_this3.calculationChange.emit(property))}))}))()}openFormatting(event){var _this4=this;return(0,asyncToGenerator.A)((function*(){const result=yield(0,firstValueFrom._)(_this4._dialog.open(formatting_component.X,{data:_this4.formGroup.get("formatting").value}).afterClosed());result&&_this4.formGroup.get("formatting").setValue(result)}))()}createCalcInputControl(event){return(0,asyncToGenerator.A)((function*(){event.preventDefault(),event.stopPropagation()}))()}openCreateParameter(){var _this5=this;return(0,asyncToGenerator.A)((function*(){const result=yield(0,firstValueFrom._)(_this5._dialog.open(parameter_create_component.r,{viewContainerRef:_this5._viewContainerRef,data:{dsCoreService:_this5.dsCoreService(),dataSettings:_this5.dataSettings(),entityType:_this5.entityType(),dimension:(0,pick.A)(_this5.formGroup.value,"dimension","hierarchy")}}).afterClosed());result&&console.log(result)}))()}openEditParameter(name){var _this6=this;return(0,asyncToGenerator.A)((function*(){const result=yield(0,firstValueFrom._)(_this6._dialog.open(parameter_create_component.r,{viewContainerRef:_this6._viewContainerRef,data:{dsCoreService:_this6.dsCoreService(),dataSettings:_this6.dataSettings(),entityType:_this6.entityType(),name:name??_this6.formGroup.value.dimension}}).afterClosed());result&&console.log(result)}))()}focus(options){this._propertySelect?.focus()}onSearchKeydown(event){"Space"===event.code&&event.stopPropagation()}getTranslation(key,params){return this.#translate.instant(key,params)}static#_=this.ctorParameters=()=>[];static#_2=this.propDecorators={isPropertySelect:[{type:core.HostBinding,args:["class.ngm-property-select"]}],label:[{type:core.Input,args:[{isSignal:!0,alias:"label",required:!1,transform:void 0}]}],capacities:[{type:core.Input,args:[{isSignal:!0,alias:"capacities",required:!1,transform:void 0}]}],required:[{type:core.Input,args:[{isSignal:!0,alias:"required",required:!1,transform:void 0}]}],editable:[{type:core.Input,args:[{isSignal:!0,alias:"editable",required:!1,transform:void 0}]}],showAttributes:[{type:core.Input,args:[{isSignal:!0,alias:"showAttributes",required:!1,transform:void 0}]}],dataSettings:[{type:core.Input,args:[{isSignal:!0,alias:"dataSettings",required:!1,transform:void 0}]}],entityType:[{type:core.Input,args:[{isSignal:!0,alias:"entityType",required:!1,transform:void 0}]}],restrictedDimensions:[{type:core.Input,args:[{isSignal:!0,alias:"restrictedDimensions",required:!1,transform:void 0}]}],dsCoreService:[{type:core.Input,args:[{isSignal:!0,alias:"dsCoreService",required:!1,transform:void 0}]}],syntax:[{type:core.Input,args:[{isSignal:!0,alias:"syntax",required:!1,transform:void 0}]}],disabled:[{type:core.Input,args:[{isSignal:!0,alias:"disabled",required:!1,transform:void 0}]}],displayDensity:[{type:core.Input,args:[{isSignal:!0,alias:"displayDensity",required:!1,transform:void 0}]}],valueChange:[{type:core.Output}],calculationChange:[{type:core.Output}],_propertySelect:[{type:core.ViewChild,args:["propertySelect",{read:fesm2022_select.VO}]}]}};function filterProperty(properties,text){return text=text?.trim().toLowerCase(),text?properties?.filter((property=>property.caption?.toLowerCase().includes(text)||property.name.toLowerCase().includes(text))):properties}NgmPropertySelectComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-property-select",template:'<label class="flex item p-1 text-sm text-ellipsis whitespace-nowrap overflow-hidden">\n  <span *ngIf="label()" class="mr-1">{{label()}}</span>\n  @if (label$ | async; as label) {\n    <mat-icon *ngIf="label.icon" displayDensity="compact">{{ label.icon }}</mat-icon>\n    <span>\n      {{ \'Ngm.Property.\'+(label?.label ?? \'DIMENSION_MEASURE\') | translate: {Default: label?.label ?? \'Dimension/Measure\'} }}\n    </span>\n  }\n</label>\n\n<div class="select-container flex flex-col items-stretch gap-2 w-full max-w-full p-1 text-xs rounded-lg \n  ring-offset-1 ring-offset-transparent ring-2 ring-transparent hover:ring-yellow-500/50">\n  <form [formGroup]="formGroup" class="relative flex-1 max-w-full flex justify-start items-center">\n    <div class="flex items-center">\n      <ng-content select="[ngmPrefix]"></ng-content>\n    </div>\n    <mat-select #propertySelect [formControl]="keyControl" class="overflow-hidden flex-1"\n      panelClass="ngm-property-select__panel ngm-select-panel ngm-density__cosy" \n      [required]="required()">\n      <mat-select-trigger *ngIf="selectTrigger()" class="flex items-center overflow-hidden pl-2">\n        <ngm-entity-property hiddenIcon [property]="selectTrigger()" class="flex-1" ></ngm-entity-property>\n\n        <div class="flex items-center" displayDensity="compact">\n\n          <button matSuffix mat-icon-button (click)="$event.stopPropagation();$event.preventDefault();showMore.set(!showMore())">\n            <mat-icon *ngIf="!showMore()">expand_more</mat-icon>\n            <mat-icon *ngIf="showMore()">expand_less</mat-icon>\n          </button>\n\n          <button mat-icon-button *ngIf="showAttributes()" [displayDensity]="displayDensity()"\n            [matMenuTriggerFor]="dimensionMenu"\n            #mt="matMenuTrigger"\n            [class.active]="mt.menuOpen"\n            (click)="$event.stopPropagation();$event.preventDefault();">\n              <mat-icon>more_vert</mat-icon>\n          </button>\n    \n          <button mat-icon-button *ngIf="hierarchies$ | async" [displayDensity]="displayDensity()"\n            [matMenuTriggerFor]="hierarchyMenu"\n            #mt="matMenuTrigger"\n            [class.active]="mt.menuOpen"\n            (click)="$event.stopPropagation();$event.preventDefault();">\n              <mat-icon fontSet="material-icons-outlined">account_tree</mat-icon>\n          </button>\n    \n          <button mat-icon-button *ngIf="membersSignal()" [displayDensity]="displayDensity()"\n            [matMenuTriggerFor]="membersMenu"\n            #mt="matMenuTrigger"\n            [class.active]="mt.menuOpen"\n            (click)="$event.stopPropagation();$event.preventDefault();">\n              <mat-icon>straighten</mat-icon>\n          </button>\n          \n        </div>\n      </mat-select-trigger>\n\n      <ngm-search class="w-full px-1" displayDensity="cosy" [formControl]="searchControl"\n        (keydown)="onSearchKeydown($event)"\n        (click)="$event.stopPropagation()"/>\n\n    @if (showDimension()) {\n      <mat-optgroup [label]=" \'Ngm.Property.DIMENSIONS\' | translate: {Default: \'Dimensions\'} ">\n        <ng-container *ngFor="let property of dimensions$ | async; trackBy trackByName">\n          <mat-option class="" [value]="property.name"\n            [ngClass]="{\n              \'ngm-option__dimension\': property.role === AggregationRole.dimension,\n              \'ngm-option__hierarchy\': property.role === AggregationRole.hierarchy,\n              \'ngm-option__level\': property.role === AggregationRole.level,\n              \'ngm-option__hidden\': property.visible === false\n            }"\n          >\n            <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [displayDensity]="DisplayDensity.cosy" [highlight]="search" ></ngm-entity-property>\n          </mat-option>\n        </ng-container>\n      </mat-optgroup>\n    }\n\n    @if (showMeasure()) {\n      <mat-optgroup [label]=" \'Ngm.Property.CALCULATIONS\' | translate: {Default: \'Calculations\'} ">\n        @for (property of calculations(); track property.name) {\n          <mat-option class="ngm-option__measure" [value]="property.name">\n            <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [highlight]="search"></ngm-entity-property>\n          </mat-option>\n        }\n        <mat-option *ngIf="editable()" class="ngm-property-select__action mt-2" [value]="null"\n          (click)="$event.stopPropagation();$event.preventDefault();">\n          <button mat-button color="primary" ngmAppearance="dashed" class="ngm-property-select__create-calculation w-full"\n            (click)="$event.stopPropagation();onCreateCalculation($event)">\n            <div class="flex justify-center items-center whitespace-nowrap text-ellipsis overflow-hidden">\n              <mat-icon>add</mat-icon>\n              <span>{{ \'Ngm.Property.CREATE_CALCULATION\' | translate: {Default: \'Create Calculation\'} }}</span>\n            </div>\n          </button>\n        </mat-option>\n      </mat-optgroup>\n    }\n    @if (showMeasureControl()) {\n      <mat-optgroup [label]=" \'Ngm.Property.MEASURE_CONTROLS\' | translate: {Default: \'Measure Controls\'} ">\n        @for (property of measureControls(); track property.name) {\n          <mat-option [value]="property.name">\n            <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [highlight]="search"></ngm-entity-property>\n          </mat-option>\n        }\n\n        <mat-option *ngIf="editable()" class="mt-2">\n          <button mat-button class="flex-1" color="primary" ngmAppearance="dashed" (click)="onCreateCalculation($event, CalculationType.MeasureControl)">\n            <mat-icon>add</mat-icon>\n            {{ \'Ngm.Property.CREATE_MEASURE_CONTROL\' | translate: {Default: \'Create Measure Control\'} }}\n          </button>\n        </mat-option>\n      </mat-optgroup>\n    }\n    \n    @if (showMeasure()) {\n      <mat-optgroup [label]=" \'Ngm.Property.MEASURES\' | translate: {Default: \'Measures\'} ">\n        <mat-option *ngFor="let property of notCalculations$ | async" class="ngm-option__measure" [value]="property.name">\n          <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [highlight]="search"></ngm-entity-property>\n        </mat-option>\n      </mat-optgroup>\n    }\n    @if (showParameter()) {\n      <mat-optgroup [label]=" \'Ngm.Property.PARAMETERS\' | translate: {Default: \'Parameters\'} ">\n        <mat-option *ngFor="let property of parameters$ | async" [value]="property.name">\n          <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [highlight]="search"></ngm-entity-property>\n        </mat-option>\n      </mat-optgroup>\n    }\n    \n    @if (showMeasure()) {\n      <mat-optgroup [label]=" \'Ngm.Property.INDICATORS\' | translate: {Default: \'Indicators\'} ">\n        <mat-option *ngFor="let property of indicators$ | async" class="ngm-option__measure" [value]="property.name">\n          <ngm-entity-property class="flex-1" [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" [highlight]="search"></ngm-entity-property>\n        </mat-option>\n      </mat-optgroup>\n    }\n    </mat-select>\n    \n    <div class="absolute left-0 top-0 h-full max-w-full flex items-center overflow-hidden pointer-events-none">\n      @if (entityTypeLoading()) {\n        <mat-spinner\n          [diameter]="20"\n          [strokeWidth]="1"\n        />\n      }\n\n      @if (error()) {\n        <div class="mat-error overflow-hidden text-ellipsis whitespace-nowrap">{{error()}}</div>\n      }\n    </div>\n\n    <ng-content select="[ngmSuffix]"></ng-content>\n  </form>\n\n  <div *ngIf="showMore()" class="min-h-12 w-full flex justify-center items-center">\n    <ng-content></ng-content>\n  </div>\n</div>\n\n<mat-menu #dimensionMenu="matMenu" class="ngm-formly ngm-density__compact">\n  <button mat-menu-item *ngIf="showDisplayAs()" disableRipple [matMenuTriggerFor]="displayMenu">\n    <mat-icon class="shrink-0">dvr</mat-icon>\n    <span>{{ \'Ngm.Property.DisplayAs\' | translate: {Default: "Display As"} }}...</span>\n  </button>\n\n  <button mat-menu-item *ngIf="labels$ | async as labels" disableRipple [matMenuTriggerFor]="labelMenu">\n    <mat-icon class="shrink-0" fontSet="material-icons-outlined">label</mat-icon>\n    <span>{{ \'Ngm.Property.Label\' | translate: {Default: "Label"} }}</span>\n  </button>\n\n  <button mat-menu-item (click)="$event.stopPropagation();$event.preventDefault();">\n    <ngm-input class="w-full flex-row" style="flex-direction: row; align-items: center;"\n      label="{{ \'Ngm.Property.Caption\' | translate: {Default: \'Caption\'} }}"\n      [(ngModel)]="caption"\n      (keydown.space)="$event.stopPropagation();$event.preventDefault();"\n    ></ngm-input>\n  </button>\n\n  @if (isMeasure$ | async) {\n    @if (showMeasureAttributes()) {\n      <button mat-menu-item (click)="openFormatting($event)">\n        <mat-icon class="shrink-0">monetization_on</mat-icon>\n        <span>{{ \'Ngm.Property.Formatter\' | translate: {Default: "Formatter"} }}</span>\n      </button>\n    }\n  \n    @if (calculationProperty(); as calculationProperty) {\n      <button mat-menu-item\n        (click)="$event.preventDefault();openEditCalculation(calculationProperty)">\n          <mat-icon class="shrink-0">functions</mat-icon>\n          <span fontSet="material-icons-outlined">\n            {{ \'Ngm.Property.EditFormula\' | translate: {Default: "Edit Formula"} }}\n          </span>\n      </button>\n    }\n  }\n\n  @if (isParameter()) {\n    <button mat-menu-item (click)="openEditParameter()">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">edit</mat-icon>\n      <span>{{ \'Ngm.Property.PARAMETER\' | translate: {Default: "Parameter"} }}</span>\n    </button>\n  }\n\n  <button mat-menu-item *ngIf="isDimension()" disableRipple (click)="$event.stopPropagation();">\n    <mat-checkbox [(ngModel)]="unbookedData">\n      {{ \'Ngm.Property.UnbookedData\' | translate: {Default: "Unbooked Data"} }}\n    </mat-checkbox>\n  </button>\n\n  <button mat-menu-item *ngIf="isDimension() || showMeasureAttributes()" disableRipple (click)="$event.stopPropagation();">\n    <mat-checkbox [(ngModel)]="zeroSuppression">\n      {{ \'Ngm.Property.ZeroSuppression\' | translate: {Default: "Zero Suppression"} }}\n    </mat-checkbox>\n  </button>\n\n  @if (showOrder()) {\n    <button mat-menu-item disableRipple [matMenuTriggerFor]="orderMenu">\n      <mat-icon class="shrink-0" fontSet="material-icons-round">sort_by_alpha</mat-icon>\n      <span>{{ \'Ngm.Property.Order\' | translate: {Default: "Order"} }}</span>\n    </button>\n  }\n  \n</mat-menu>\n\n<mat-radio-group [(ngModel)]="displayBehaviour">\n  <mat-menu #displayMenu="matMenu" class="ngm-formly ngm-density__compact">\n    <button mat-menu-item disableRipple *ngFor="let behaviour of DISPLAY_BEHAVIOUR_LIST"\n      (click)="$event.stopPropagation();">\n      <mat-radio-button [value]="behaviour.value">\n        {{ \'Ngm.Property.\' + behaviour.label | translate: {Default: behaviour.label} }}\n      </mat-radio-button>\n    </button>\n  </mat-menu>\n</mat-radio-group>\n\n<mat-radio-group [(ngModel)]="memberCaption">\n  <mat-menu #labelMenu="matMenu" class="ngm-formly ngm-density__compact">\n    <button mat-menu-item disableRipple\n      (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" [value]="null">\n        {{ \'Ngm.Property.Auto\' | translate: {Default: "Auto"} }}\n      </mat-radio-button>\n    </button>\n\n    @for (item of labels$ | async; track item.name) {\n      <button mat-menu-item disableRipple\n        (click)="$event.stopPropagation();">\n        <mat-radio-button class="ngm-radio-button__property" [value]="item.name" [title]="item.caption">\n          {{item.caption}}\n        </mat-radio-button>\n      </button>\n    }\n  </mat-menu>\n</mat-radio-group>\n\n<mat-radio-group [(ngModel)]="level">\n  <mat-menu #hierarchyMenu="matMenu" class="ngm-formly ngm-density__compact">\n    <button mat-menu-item disableRipple [matMenuTriggerFor]="hierarchiesMenu">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">account_tree</mat-icon>\n      <span>{{ \'Ngm.Property.HIERARCHY\' | translate: {Default: "Hierarchy"} }}...</span>\n    </button>\n  \n    <mat-divider></mat-divider>\n\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button [value]="null" class="ngm-radio-button__property">\n        {{ \'Ngm.Property.Default\' | translate: {Default: "Default"} }}\n      </mat-radio-button>\n    </button>\n    @for (property of levels$ | async; track property.name) {\n      <button mat-menu-item disableRipple\n        (click)="$event.stopPropagation();">\n        <mat-radio-button [value]="property.name" class="ngm-radio-button__property">\n          <ngm-entity-property class="w-full" hiddenIcon [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto" />\n        </mat-radio-button>\n      </button>\n    }\n  \n    <mat-divider></mat-divider>\n  \n    <button mat-menu-item disableRipple (click)="selectMembers($event)">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">people_outline</mat-icon>\n      <span [matBadgeHidden]="!members?.length" [matBadge]="members?.length" matBadgeColor="accent" matBadgeOverlap="false"\n        [class.line-through.decoration-pink-500]="exclude"\n      >\n        {{ \'Ngm.Property.MEMBERS\' | translate: {Default: "Members"} }}\n      </span>\n    </button>\n\n    <button mat-menu-item disableRipple [matMenuTriggerFor]="memberMenu">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">alternate_email</mat-icon>\n      <span [matBadge]="parameter ? 1 : null" matBadgeColor="accent" matBadgeOverlap="false">\n        {{ \'Ngm.Property.PARAMETER\' | translate: {Default: "Parameter"} }}\n      </span>\n    </button>\n\n    <button mat-menu-item *ngIf="showAttributes()" disableRipple [matMenuTriggerFor]="propertiesMenu">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">extension</mat-icon>\n      {{ \'Ngm.Property.PropertyList\' | translate: {Default: "Property List"} }}\n      \n    </button>\n\n    <button mat-menu-item *ngIf="showAttributes()" disableRipple (click)="$event.stopPropagation();">\n      <mat-checkbox [(ngModel)]="displayHierarchy" style="width: 100%;">\n        {{ \'Ngm.Property.DisplayHierarchy\' | translate: {Default: "Display as Hierarchy"} }}\n      </mat-checkbox>\n    </button>\n  </mat-menu>\n</mat-radio-group>\n\n<mat-radio-group [(ngModel)]="hierarchy">\n  <mat-menu #hierarchiesMenu="matMenu" class="ngm-formly ngm-density__compact">\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" [value]="null">\n        {{ \'Ngm.Property.Default\' | translate: {Default: "Default"} }}\n      </mat-radio-button>\n    </button>\n    <button mat-menu-item disableRipple *ngFor="let property of hierarchies$ | async; trackBy: trackByName"\n      (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" [value]="property.name">\n        <ngm-entity-property class="w-full" hiddenIcon [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto"></ngm-entity-property>\n      </mat-radio-button>\n    </button>\n  </mat-menu>\n</mat-radio-group>\n\n<mat-menu #membersMenu="matMenu" class="ngm-density__compact">\n  <button mat-menu-item class="w-full" disableRipple *ngFor="let property of membersSignal(); trackBy: trackByName"\n    (click)="$event.stopPropagation();">\n    <mat-checkbox class="ngm-checkbox__property" [checked]="$any(property).selected" (change)="toggleMember(property.name, $event.checked)">\n      <ngm-entity-property class="w-full" hiddenIcon [property]="property" [displayBehaviour]="DISPLAY_BEHAVIOUR.auto"></ngm-entity-property>\n    </mat-checkbox>\n  </button>\n</mat-menu>\n\n<mat-menu #propertiesMenu="matMenu" class="ngm-formly ngm-density__compact">\n  <mat-selection-list [(ngModel)]="properties" displayDensity="compact">\n    <mat-list-option *ngFor="let property of properties$ | async" [value]="property.name"\n      (click)="$event.stopPropagation();">\n      {{ property.caption }}\n    </mat-list-option>\n  </mat-selection-list>\n</mat-menu>\n\n<mat-radio-group [(ngModel)]="parameter">\n  <mat-menu #memberMenu="matMenu" class="ngm-property-select__parameter-menu ngm-density__compact">\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button [value]="null">\n        {{ \'Ngm.Common.None\' | translate: {Default: "None"} }}\n      </mat-radio-button>\n    </button>\n\n    <button mat-menu-item disableRipple *ngFor="let option of parameters$ | async"\n      (click)="$event.stopPropagation();">\n      <mat-radio-button [value]="option.name">\n        {{ option.caption || option.name }}\n      </mat-radio-button>\n\n      <button mat-icon-button displayDensity="cosy" (click)="openEditParameter(option.name)">\n        <mat-icon fontSet="material-icons-outlined">edit</mat-icon>\n      </button>\n    </button>\n  \n    <mat-divider></mat-divider>\n\n    <button mat-menu-item disableRipple ngmAppearance="dashed" (click)="$event.stopPropagation();openCreateParameter()">\n      <mat-icon class="shrink-0" fontSet="material-icons-outlined">add</mat-icon>\n      <span>{{ \'Ngm.Property.CreateParameter\' | translate: {Default: "Create Parameter"} }}</span>\n    </button>\n  </mat-menu>\n</mat-radio-group>\n\n<mat-radio-group [(ngModel)]="order">\n  <mat-menu #orderMenu="matMenu" class="ngm-density__compact">\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" [value]="null">\n        {{ \'Ngm.Property.None\' | translate: {Default: "None"} }}\n      </mat-radio-button>\n    </button>\n\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" value="ASC">\n        {{ \'Ngm.Property.Order_ASC\' | translate: {Default: "ASC"} }}\n      </mat-radio-button>\n    </button>\n    <button mat-menu-item disableRipple (click)="$event.stopPropagation();">\n      <mat-radio-button class="ngm-radio-button__property" value="DESC">\n        {{ \'Ngm.Property.Order_DESC\' | translate: {Default: "DESC"} }}\n      </mat-radio-button>\n    </button>\n  </mat-menu>\n</mat-radio-group>\n',providers:[{provide:fesm2022_forms.kq,multi:!0,useExisting:(0,core.forwardRef)((()=>NgmPropertySelectComponent))}],imports:[common.CommonModule,fesm2022_forms.YN,fesm2022_forms.X1,form_field.RG,input.fS,fesm2022_select.Ve,icon.m_,fesm2022_button.Hl,menu.Cn,fesm2022_radio.Wk,divider.w,list.Fg,fesm2022_checkbox.g7,badge.Y,progress_spinner.D6,ngx_translate_core.h,common_module.y,property_component.G5],styles:[property_select_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],NgmPropertySelectComponent)},"./packages/angular/entity/property/property.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G5:()=>NgmEntityPropertyComponent,h2:()=>propertyIcon});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var property_componentngResource=__webpack_require__("./packages/angular/entity/property/property.component.scss?ngResource"),property_componentngResource_default=__webpack_require__.n(property_componentngResource),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),common_module=__webpack_require__("./packages/angular/common/common.module.ts"),displayDensity=__webpack_require__("./packages/angular/core/directives/displayDensity.ts"),src=__webpack_require__("./packages/core/src/index.ts");let NgmEntityPropertyComponent=class NgmEntityPropertyComponent{constructor(){this.AGGREGATION_ROLE=src.H$f,this.property=(0,core.input)(null),this.displayBehaviour=(0,core.input)(null),this.displayDensity=(0,core.input)(null),this.hiddenIcon=(0,core.input)(!1,{transform:core.booleanAttribute}),this.highlight=(0,core.input)(null),this.role=(0,core.input)(null),this.icon=(0,core.signal)(null),(0,core.effect)((()=>{const property=this.property(),role=this.role();this.icon.set(property?propertyIcon({...property,role:role??property.role}).icon:null)}),{allowSignalWrites:!0})}static#_=this.ctorParameters=()=>[];static#_2=this.propDecorators={property:[{type:core.Input,args:[{isSignal:!0,alias:"property",required:!1,transform:void 0}]}],displayBehaviour:[{type:core.Input,args:[{isSignal:!0,alias:"displayBehaviour",required:!1,transform:void 0}]}],displayDensity:[{type:core.Input,args:[{isSignal:!0,alias:"displayDensity",required:!1,transform:void 0}]}],hiddenIcon:[{type:core.Input,args:[{isSignal:!0,alias:"hiddenIcon",required:!1,transform:void 0}]}],highlight:[{type:core.Input,args:[{isSignal:!0,alias:"highlight",required:!1,transform:void 0}]}],role:[{type:core.Input,args:[{isSignal:!0,alias:"role",required:!1,transform:void 0}]}]}};NgmEntityPropertyComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,imports:[common.CommonModule,icon.m_,displayDensity.sP,common_module.y],changeDetection:core.ChangeDetectionStrategy.OnPush,selector:"ngm-entity-property",template:'@if (!hiddenIcon() && icon()) {\n  <mat-icon mat-list-icon class="shrink-0 mr-1">{{ icon() }}</mat-icon>\n}\n\n<ngm-display-behaviour class="flex-1 overflow-hidden"\n  [displayBehaviour]="displayBehaviour()"\n  [option]="{\n    key: property().name,\n    caption: property().caption\n  }"\n  [highlight]="highlight()"\n/>\n',host:{class:"ngm-entity-property"},styles:[property_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],NgmEntityPropertyComponent);const SemanticIconMap={[src.a7d["Address.Country"]]:"public"};function propertyIcon(property){let icon=null,label=null;switch(property?.role){case src.H$f.dimension:(0,src.pt_)(property)?(icon="schedule",label="Calendar"):SemanticIconMap[property.semantics?.semantic]?(icon=SemanticIconMap[property.semantics?.semantic],label=property.semantics?.semantic):(icon="tag",label="Dimension");break;case src.H$f.hierarchy:icon="h_mobiledata",label="Hierarchy";break;case src.H$f.level:icon="format_list_numbered_rtl",label="Level";break;case src.H$f.variable:icon="priority_high",label="Variable";break;case src.H$f.measure:(0,src.nc$)(property)?(0,src.pIX)(property)?(icon="alternate_email",label="Measure Control"):(0,src.Bp3)(property)?(icon="trending_up",label="Indicator"):(icon="functions",label="Calculation"):(icon="straighten",label="Measure");break;default:(0,src.fXE)(property)&&(icon="alternate_email",label="Parameter")}return{icon,label}}},"./packages/angular/entity/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var PropertyCapacity;__webpack_require__.d(__webpack_exports__,{w:()=>PropertyCapacity}),function(PropertyCapacity){PropertyCapacity.Dimension="Dimension",PropertyCapacity.MeasureGroup="MeasureGroup",PropertyCapacity.Measure="Measure",PropertyCapacity.Parameter="Parameter",PropertyCapacity.MeasureControl="MeasureControl",PropertyCapacity.MeasureAttributes="MeasureAttributes",PropertyCapacity.Order="Order",PropertyCapacity.MeasureStyle="MeasureStyle",PropertyCapacity.MeasureStylePalette="MeasureStylePalette",PropertyCapacity.MeasureStylePalettePattern="MeasureStylePalettePattern",PropertyCapacity.MeasureStyleRole="MeasureStyleRole",PropertyCapacity.MeasureStyleShape="MeasureStyleShape",PropertyCapacity.MeasureStyleGridBar="MeasureStyleGridBar",PropertyCapacity.MeasureStyleReferenceLine="MeasureStyleReferenceLine",PropertyCapacity.MeasureStyleChartOptions="MeasureStyleChartOptions",PropertyCapacity.DimensionChart="DimensionChart"}(PropertyCapacity||(PropertyCapacity={}))},"./packages/angular/i18n/zhHans.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>ZhHans});const ZhHans={Ngm:{Common:{Add:"添加",Cancel:"取消",Apply:"应用",Reset:"重置",Search:"搜索",Select:"选择",Clear:"清空",Search_Placeholder:"请输入关键词",DisplayBehaviour_Description:"描述",DisplayBehaviour_DescriptionID:"描述 ID",DisplayBehaviour_IDDescription:"ID 描述",DisplayBehaviour_ID:"ID",DisplayBehaviour_Auto:"自动",SelectionType_Single:"单选",SelectionType_Multiple:"多选",Presentation_Flat:"平铺",Presentation_Hierarchy:"层级",HierarchySelectionMode_Individual:"单个",HierarchySelectionMode_SelfDescendants:"自己和后代",HierarchySelectionMode_DescendantsOnly:"只后代",HierarchySelectionMode_SelfChildren:"自己和子代",HierarchySelectionMode_ChildrenOnly:"只子代",Measures:"度量",None:"无",Default:"默认",Hierarchy:"层次结构",DisplayBehaviour:"显示行为",DisplayBehaviour_IDOnly:"编码"},AnalyticalCard:{Screenshot:"截图",DataDownload:"下载数据",Refresh:"刷新",DrillDown:"下钻",DrillLevel:"层级下钻",DrillDimension:"维度下钻",LinkAnalysis:"联动筛选",DataEmpty:"数据为空"},AnalyticalGrid:{DataDownload:"下载数据",SORT:"排序",MOVE:"移动",ASCENDING:"正序",DESCENDGING:"倒序",MOVELEFT:"向左",MOVERIGHT:"向右",Search:"搜索",SelectAll:"选择所有",Pin:"固定"},Controls:{ValueHelp:{Title:"为{{value}}设置过滤器",AvailableMembers:"可选成员",DisplayBehaviour:"展现形式",SelectedMembers:"选中成员",ClearSelection:"清空选择",ShowUnbookedMembers:"显示未分配成员",ShowAllMember:"显示‘所有’成员",ShowOnlyLeaves:"只显示叶子节点",ExcludeSelectedMembers:"排除选中成员",SelectionType:"选择类型",Presentation:"展现形式",HierarchySelectionMode:"层级选择模式",Hierarchy:"层次结构"}},Entity:{SelectEntities:"选择数据集",SemanticModel:"语义模型",Cube:"多维数据集",AnnotatedCube:"增强过的多维数据集",MEASURE:"度量",SELECT_DIMENSION:"选择维度",MeasureFormatting:"度量格式",ShortNumber:"缩写数字",Decimals:"小数位",Unit:"单位",UseUnderlyingUnit:"使用模型单位",DigitsInfo:"数字格式"},EntitySchema:{Parameters:"参数",Measures:"度量",Properties:"属性"},Formula:{Editor:{EditFormula:"编辑公式",Format:"格式化",Help:"帮助"}},Table:{Select:"选择",NoData:"无数据",MatchingFilter:'匹配过滤条件"{{value}}"',firstPageLabel:"第一",itemsPerPageLabel:"每页",lastPageLabel:"最后",nextPageLabel:"下一页",previousPageLabel:"上一页",rangeLabel0:"页 1 共 1",pageLabel:"页",ofLabel:"共"},DatePicker:{Date:"日期",Year:"年",Quarter:"季",Month:"月",Week:"周",Day:"日",From:"从",To:"至"},TimeFilter:{SET_DATE_RANGE:"为 {{property}} 设置时间区间",CURRENT_DATE:"当前日期",SYSTEM_DATE:"系统时间",USER_CURRENT_DATE:"用户当前时间",ADD_TIME_RANGE:"添加时间区间",RANGE:"区间",RANGE_TYPE:"区间类型",RANGE_TYPE_STANDARD:"标准",RANGE_TYPE_OFFSET:"偏移",GRANULARITY:"粒度",YEAR:"年",QUARTER:"季度",MONTH:"月",WEEK:"周",DAY:"日",LOOK_BACK:"回顾",LOOK_AHEAD:"展望",CURRENT_PERIOD:"当前时间",FORMATTER:"格式",OFFSET_DIRECTION:"偏移方向",OFFSET_AMOUNT:"偏移量",SETTINGS_FOR_USERS:"为用户设置",ALLOW_MODIFY_SELECTIONS:"允许查看者修改选择",SELECTION_TYPE:"选择类型",SELECTION_TYPE_MULTIPLE:"多选",SELECTION_TYPE_SINGLE:"单选",TODAY:"当前期间",Year:"年",Quarter:"季度",Month:"月",Week:"周",Day:"日",Today:"今天"},AdvancedSlicer:{TITLE:"高级切片器",CONTEXT:"上下文",OPERATOR:"操作符",ENABLE_OTHER:"汇总其它项",VALUE:"值",VALUE_FROM:"从",VALUE_TO:"至",MEASURE:"度量",MeasureSelectPlaceholder:"选择或新建一个度量",Equal:"等于",NotEqual:"不等于",LessThan:"小于",GreaterThan:"大于",LessEqual:"小于等于",GreaterEqual:"大于等于",Between:"介于",NotBetween:"不介于",TopCount:"前 N 个",BottomCount:"后 N 个",TopPercent:"前百分比的",BottomPercent:"后百分比的",TopSum:"前总数",BottomSum:"后总数"},Property:{PARAMETER:"参数",PARAMETERS:"参数",MEASURE:"度量",MEASURES:"度量",MeasureGroup:"度量组",INDICATORS:"指标",CREATE_PARAMETER:"创建参数",EditParameter:"编辑参数",CALCULATIONS:"计算度量",DIMENSION:"维度",DIMENSIONS:"维度",ADD_DIMENSION:"添加维度",MEMBERS:"成员",HIERARCHY:"层次结构",ADD_PARAMETER_MEMBER:"添加成员",MEASURE_CONTROLS:"度量控制",CREATE_CALCULATION:"创建计算",CREATE_MEASURE_CONTROL:"创建度量控制",REFERENCE_LINE:"参考线",Input:"输入",Select:"选择",Dimensions:"维度",Name:"名称",NameRequired:"名称必输或已存在",Caption:"标签",Value:"值",DefaultValue:"默认值",ValueType:"值类型",DisplayAs:"显示为",Label:"文本字段",Formatter:"格式设置",EditFormula:"编辑公式",UnbookedData:"无成员数据",ZeroSuppression:"清零",PropertyList:"属性列表",DisplayHierarchy:"包含父级层级",CreateParameter:"创建参数",CurrentMember:"当前成员",PreviousNMember:"之前第 N 个成员",NextNMember:"之后第 N 个成员",ParallelMember:"平行成员",AncestorMember:"祖先成员",SelectByMembers:"选择成员",NewCalculationInputControl:"新建计算输入",NthMember:"值 / 第 N 个",IsDefault:"默认",Default:"默认",Auto:"自动","Description and ID":"名称+ID","Description Only":"名称","ID Only":"ID",Description:"描述",Order:"排序",None:"无",Order_ASC:"正序",Order_DESC:"倒序",Dimension:"维度",AvailableMembers:"可用成员",DimensionNotFound:"在数据集‘{{cube}}’中未找到维度‘{{dimension}}’",DIMENSION_MEASURE:"维度/度量",Parameter:"参数","Measure Control":"度量控制",Measure:"度量",Calculation:"计算",Hierarchy:"层次结构",Level:"层级","Measure Group":"度量组",Indicator:"指标",Calendar:"日历","Address.Country":"国家",Variable:"参数变量"},MeasureSelect:{EditCalculationMeasure:"编辑计算度量",NewCalculationMeasure:"新建计算度量"},Calculation:{TITLE:"计算编辑器",TYPE:"类型",Name:"名称",NameRequired:"名称必输或已存在",Caption:"标签",FUNCTIONS:"函数",DIMENSION_MEMBERS:"维度成员",CALCULATED_MEMBERS:"计算成员",PARAMETERS:"参数",CALCULATED_MEASURE:"计算公式",RESTRICTED_MEASURE:"受限度量",VARIANCE_MEASURE:"差值度量",AGGREGATION:"聚合",DIMENSION_TO_MEASURE:"维度转度量",MEASURE_CONTROL:"度量控制",PROPERTIES:"属性",OPERATION:"运算",VALUE:"值",AGGREGATION_DIMENSIONS:"聚合维度",ADD_DIMENSION:"添加维度",SELECTION_CONTEXT:"选择上下文",ENABLE_CONSTANT_SELECTION:"启用常量选择",EDIT_FORMULA:"编辑公式",ToggleSidebar:"切换侧边栏",UseConditionalAggregation:"使用条件聚合",ConditionalDimensions:"条件维度",ExcludeConditions:"排除条件",Compare:"比",To:"较",BaseDimension:"基准维度",SetNoDataasZero:"将无数据当作零",CalculateasPercentage:"计算为百分比",DirectDivide:"直接除",AbsoluteBaseValue:"绝对化基值",DivideBy:"除以",CompareValueA:"比 (A)",ToValueB:"较 (B)",Measure:"度量",RestrictiveConditions:"限定条件",ConstantSelectionTootip:"锁定限定条件维度成员,使其不会被用户上下文切片器所覆盖",Dimension:"维度",MeasureSelectOptions:"度量选择选项",ConditionalAggregation:"条件聚合",Unit:"单位",Formulas:"公式",MeasureSelectPlaceholder:"选择或新建一个度量",MeasureIsRequired:"度量必选"},AdvancedFilter:{Title:"组合切片器",AND:"且",OR:"或",GROUP:"组合",Operator:"操作符",Value:"值",Condition:"条件",AddGroup:'"且"组合',OrGroup:'"或"组合',EndGroup:"结束组合",DeleteGroup:"删除组合",Tips:"使用 且/或 创建条件组合"},Selection:{Slicers:"切片器",AdvancedFilter:"组合切片器",CombinationSlicer:"组合切片器",AdvancedSlicer:"高级切片器",DimensionMembers:"维度成员",TimeRanges:"动态时间范围",OnContext:"基于",SLICERS_BAR:{TITLE:"过滤器"},SLICER:{ADVANCED_SLICER:"高级切片器",ADVANCED_FILTER:"组合切片器"},DateFunctions:{SYSTEMTIME:"系统时间",TODAY:"今天"}},Messages:{NotFoundValue:"未找到值："}}}},"./packages/angular/mock/provider.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>MODEL_KEY,p:()=>provideOcapMock});var _home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/src/index.ts"),_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/angular/core/services/core.service.ts"),_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/angular/core/core.service.ts"),_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/angular/core/types.ts"),_agent_mock_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/mock/agent-mock.service.ts");const MODEL_KEY="key_sales";function provideOcapMock(){return[_core__WEBPACK_IMPORTED_MODULE_1__.s,_core__WEBPACK_IMPORTED_MODULE_2__.g,{provide:_core__WEBPACK_IMPORTED_MODULE_3__.s2,useClass:_agent_mock_service__WEBPACK_IMPORTED_MODULE_4__.ug,multi:!0},{provide:_core__WEBPACK_IMPORTED_MODULE_3__.ox,useValue:{type:"SQL",factory:(_ref=(0,_home_runner_work_xpert_xpert_node_modules_angular_devkit_build_angular_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.A)((function*(){const{SQLDataSource}=yield __webpack_require__.e(2449).then(__webpack_require__.bind(__webpack_require__,"./packages/sql/src/index.ts"));return SQLDataSource})),function factory(){return _ref.apply(this,arguments)})},multi:!0},{provide:_core__WEBPACK_IMPORTED_MODULE_3__._l,useValue:{key:MODEL_KEY,name:"Sales",type:"SQL",agentType:_metad_ocap_core__WEBPACK_IMPORTED_MODULE_0__.Eoi.Browser,settings:{ignoreUnknownProperty:!0},schema:{cubes:[_agent_mock_service__WEBPACK_IMPORTED_MODULE_4__.cb]}},multi:!0}];var _ref}},"./packages/angular/mock/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{En:()=>provideTranslate});var _angular_common_http__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/angular/core/i18n/missing-tanslation.ts"),_metad_ocap_angular_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/angular/i18n/zhHans.ts");const zhHansLanguage="zh-Hans";class CustomTranslateLoader{getTranslation(lang){return console.log(lang),lang===zhHansLanguage?(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(_metad_ocap_angular_i18n__WEBPACK_IMPORTED_MODULE_1__.f):(0,rxjs__WEBPACK_IMPORTED_MODULE_0__.of)(null)}}function provideTranslate(defaultLanguage=zhHansLanguage){return(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.importProvidersFrom)(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.h.forRoot({missingTranslationHandler:{provide:_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.er,useClass:_metad_ocap_angular_core__WEBPACK_IMPORTED_MODULE_4__.y},loader:{provide:_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.Wr,useClass:CustomTranslateLoader,deps:[_angular_common_http__WEBPACK_IMPORTED_MODULE_5__.Qq]},defaultLanguage}))}},"./packages/angular/parameter/parameter-create/parameter-create.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>NgmParameterCreateComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var parameter_create_componentngResource=__webpack_require__("./packages/angular/parameter/parameter-create/parameter-create.component.scss?ngResource"),parameter_create_componentngResource_default=__webpack_require__.n(parameter_create_componentngResource),drag_drop=__webpack_require__("./node_modules/@angular/cdk/fesm2022/drag-drop.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),button_toggle=__webpack_require__("./node_modules/@angular/material/fesm2022/button-toggle.mjs"),fesm2022_checkbox=__webpack_require__("./node_modules/@angular/material/fesm2022/checkbox.mjs"),dialog=__webpack_require__("./node_modules/@angular/material/fesm2022/dialog.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),fesm2022_radio=__webpack_require__("./node_modules/@angular/material/fesm2022/radio.mjs"),input_module=__webpack_require__("./packages/angular/common/input/input.module.ts"),hierarchy_select_component=__webpack_require__("./packages/angular/common/hierarchy-select/hierarchy-select.component.ts"),controls_module=__webpack_require__("./packages/angular/controls/controls.module.ts"),core_service=__webpack_require__("./packages/angular/core/services/core.service.ts"),core_module=__webpack_require__("./packages/angular/core/core.module.ts"),src=__webpack_require__("./packages/core/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/dist/fesm2022/ngx-translate-core.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js");let NgmParameterCreateComponent=class NgmParameterCreateComponent{#coreService;get availableMembers(){return this.formGroup.get("availableMembers")}get name(){return this.formGroup.get("name")}get paramType(){return this.formGroup.get("paramType")}get dataType(){return this.formGroup.get("dataType")}get value(){return this.formGroup.get("value")}get dimension(){return this.formGroup.value.dimension}get hierarchy(){return this.formGroup.value.hierarchy}get slicer(){return this._slicer}set slicer(value){this._slicer.members=value?.members??[],this.setAvailableMembers(this._slicer.members.map((member=>({...member,isDefault:member.isDefault??!1}))))}constructor(_formBuilder,_dialogRef,data){if(this._formBuilder=_formBuilder,this._dialogRef=_dialogRef,this.data=data,this.ParameterControlEnum=src.Yvx,this.#coreService=(0,core.inject)(core_service.s),this.appearance="fill",this.label="Parameter",this.dataSettings=(0,core.model)(),this.entityType=(0,core.model)(),this.edit=(0,core.signal)(!1),this.memberTreeOptions={selectionType:src.dDN.Multiple,initialLevel:1,searchable:!0},this.formGroup=this._formBuilder.group({__id__:(0,src.uRe)(),name:["",[fesm2022_forms.k0.required,this.forbiddenNameValidator()]],caption:null,dimension:null,hierarchy:null,paramType:[src.Yvx.Input,fesm2022_forms.k0.required],value:null,dataType:null,members:[],availableMembers:this._formBuilder.array([])}),this._slicer={members:[]},this.dimensions$=(0,rxjs_interop.br)(this.entityType).pipe((0,map.T)((entityType=>(0,src.Jwe)(entityType)))),this.dimension$=this.formGroup.valueChanges.pipe((0,filter.p)((value=>!(0,src.gD_)(value.dimension))),(0,map.T)((value=>({dimension:value.dimension,hierarchy:value.hierarchy})))),this.inputType=(0,rxjs_interop.ot)(this.dataType.valueChanges.pipe((0,startWith.Z)(this.dataType.value),(0,map.T)((type=>"string"===type?"text":type)))),this.data)if(this.dataSettings.set(this.data.dataSettings),this.entityType.set(this.data.entityType),this.data.name){this.edit.set(!0);const property=this.entityType()?.parameters?.[this.data.name];this.formGroup.patchValue(property??{}),this.slicer={...this.slicer,members:[...property.availableMembers??[]]}}else this.formGroup.patchValue(this.data.dimension)}onApply(){this.#coreService.updateEntity({type:"Parameter",dataSettings:this.dataSettings(),parameter:{...this.formGroup.value,members:this.formGroup.value.availableMembers.filter((member=>member.isDefault))}}),this._dialogRef.close()}create(item){return this._formBuilder.group(item??{value:[null,fesm2022_forms.k0.required],label:null,isDefault:null})}setAvailableMembers(members){this.availableMembers.clear(),members?.forEach((member=>{this.availableMembers.push(this.create(member))}))}add(){this.availableMembers.push(this.create())}remove(i){this.availableMembers.removeAt(i)}forbiddenNameValidator(){return control=>!this.edit&&this.entityType()?.parameters&&!!Object.values(this.entityType().parameters).find((item=>item.name===control.value))?{forbiddenName:{value:control.value}}:null}onHierarchyChange(hierarchy){this.formGroup.patchValue({dimension:(0,src.dro)(this.entityType(),hierarchy)?.dimension,hierarchy})}static#_=this.ctorParameters=()=>[{type:fesm2022_forms.ok},{type:dialog.CP,decorators:[{type:core.Optional}]},{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[dialog.Vh]}]}];static#_2=this.propDecorators={appearance:[{type:core.Input}],label:[{type:core.Input}],dataSettings:[{type:core.Input,args:[{isSignal:!0,alias:"dataSettings",required:!1}]},{type:core.Output,args:["dataSettingsChange"]}],entityType:[{type:core.Input,args:[{isSignal:!0,alias:"entityType",required:!1}]},{type:core.Output,args:["entityTypeChange"]}]}};NgmParameterCreateComponent=(0,tslib_es6.Cg)([(0,core.Component)({standalone:!0,selector:"ngm-parameter-create",template:'<div class="ngm-theme-dark dark w-[300px] shrink-0 flex flex-col justify-start overflow-auto bg-bluegray-700 text-white p-4 group">\n  <div class="w-full flex justify-start items-center mb-2" cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>\n    <mat-icon displayDensity="cosy" class="-ml-2 opacity-0 group-hover:opacity-80">drag_indicator</mat-icon>\n    @if (edit()) {\n      <span class="text-lg pointer-events-none">\n        {{ \'Ngm.Property.EditParameter\' | translate: {Default: "Edit Parameter"} }}\n      </span>\n    } @else {\n      <span class="text-lg pointer-events-none">\n        {{ \'Ngm.Property.CREATE_PARAMETER\' | translate: {Default: "Create Parameter"} }}\n      </span>\n    }\n  </div>\n\n  <form [formGroup]="formGroup" class="flex-1">\n    <div class="flex flex-col justify-start items-stretch">\n      <mat-form-field appearance="fill" color="accent">\n        <mat-label>{{ \'Ngm.Property.Name\' | translate: {Default: "Name"} }}</mat-label>\n        <input matInput formControlName="name" required>\n        <mat-error *ngIf="name.invalid">{{ \'Ngm.Property.NameRequired\' | translate: {Default: "Name Required"} }}</mat-error>\n      </mat-form-field>\n\n      <mat-form-field appearance="fill" color="accent">\n        <mat-label>{{ \'Ngm.Property.Caption\' | translate: {Default: "Caption"} }}</mat-label>\n        <input matInput formControlName="caption">\n      </mat-form-field>\n    </div>\n\n    <div class="flex flex-col justify-start items-start gap-4 py-4 px-2">\n      <mat-radio-group formControlName="paramType" class="flex flex-col justify-start items-start gap-4">\n        <mat-radio-button [value]="ParameterControlEnum.Input">\n          {{ \'Ngm.Property.Input\' | translate: {Default: "Input"} }}\n        </mat-radio-button>\n        <mat-radio-button [value]="ParameterControlEnum.Select">\n          {{ \'Ngm.Property.Select\' | translate: {Default: "Select"} }}\n        </mat-radio-button>\n        <mat-radio-button [value]="ParameterControlEnum.Dimensions">\n          {{ \'Ngm.Property.Dimensions\' | translate: {Default: "Dimensions"} }}\n        </mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </form>\n\n  <div class="flex w-full h-10"></div>\n\n  <div class="flex justify-start">\n    <div ngmButtonGroup>\n        <button mat-raised-button color="accent" cdkFocusInitial [disabled]="formGroup.invalid" (click)="onApply()">\n            {{ \'Ngm.Common.Apply\' | translate: {Default: \'Apply\'} }}\n        </button>\n        <button mat-button mat-dialog-close>\n            {{ \'Ngm.Common.Cancel\' | translate: {Default: \'Cancel\'} }}\n        </button>\n    </div>\n  </div>\n</div>\n\n<div class="mat-typography min-w-[300px] flex-1 flex flex-col justify-start items-stretch p-4 overflow-hidden" cdkDropListGroup>\n\n  <div *ngIf="paramType.value === ParameterControlEnum.Input" class="flex flex-col justify-start items-start gap-8">\n    <div class="flex flex-col justify-start items-start gap-2">\n      <label>{{ \'Ngm.Property.ValueType\' | translate: {Default: "Value Type"} }}</label>\n      <mat-button-toggle-group displayDensity="compact" ngmAppearance="outline" color="accent"\n        [formControl]="dataType">\n        <mat-button-toggle disableRipple value="number">Number</mat-button-toggle>\n        <mat-button-toggle disableRipple value="string">String</mat-button-toggle>\n        <mat-button-toggle disableRipple value="boolean">Boolean</mat-button-toggle>\n        <mat-button-toggle disableRipple value="date">Date</mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n\n    <ngm-input label="{{ \'Ngm.Property.DefaultValue\' | translate: {Default: \'Default Value\'} }}" \n      [formControl]="value"\n      [type]="inputType()"\n    ></ngm-input>\n    \n  </div>\n\n  <div *ngIf="paramType.value === ParameterControlEnum.Select"  class="flex-1 overflow-y-auto">\n    <div class="text-lg">{{ \'Ngm.Property.AvailableMembers\' | translate: {Default: "Available Members"} }}</div>\n    <div *ngFor="let item of availableMembers.controls; let i = index;" class="flex justify-start items-center gap-2 group"\n      [formGroup]="$any(item)"\n    >\n      <mat-checkbox formControlName="isDefault">\n        {{ \'Ngm.Property.IsDefault\' | translate: {Default: "Is Default"} }}\n      </mat-checkbox>\n      <mat-form-field appearance="fill">\n        <mat-label>{{ \'Ngm.Common.VALUE\' | translate: {Default: "Value"} }}</mat-label>\n        <input matInput formControlName="value">\n      </mat-form-field>\n      <mat-form-field appearance="fill">\n        <mat-label>{{ \'Ngm.Common.LABEL\' | translate: {Default: "Label"} }}</mat-label>\n        <input matInput formControlName="label">\n      </mat-form-field>\n\n      <button mat-icon-button ngmAppearance="danger" displayDensity="cosy" class="opacity-0 group-hover:opacity-100" (click)="remove(i)">\n        <mat-icon>close</mat-icon>\n      </button>\n    </div>\n\n    <button mat-stroked-button displayDensity="cosy" ngmAppearance="dashed" (click)="add()">\n      {{ \'Ngm.Property.ADD_PARAMETER_MEMBER\' | translate: {Default: "Add Member"} }}\n    </button>\n  </div>\n\n  <div *ngIf="paramType.value === ParameterControlEnum.Dimensions" class="flex-1 w-full max-w-full flex flex-col justify-start items-stretch">\n    <ngm-hierarchy-select appearance="fill"\n      [label]=" \'Ngm.Property.Dimension\' | translate: {Default: \'Dimension\' } "\n      [dimensions]="dimensions$ | async"\n      [ngModel]="hierarchy"\n      (ngModelChange)="onHierarchyChange($event)"\n    ></ngm-hierarchy-select>\n    <ngm-member-tree class="flex-1 w-full h-full"\n      [dataSettings]="dataSettings()"\n      [dimension]="dimension$ | async"\n      [options]="memberTreeOptions"\n      [(ngModel)]="slicer"\n    ></ngm-member-tree>\n  </div>\n</div>\n',imports:[common.CommonModule,fesm2022_forms.YN,fesm2022_forms.X1,drag_drop.ad,input.fS,fesm2022_button.Hl,form_field.RG,button_toggle.Vg,icon.m_,fesm2022_radio.Wk,dialog.hM,fesm2022_checkbox.g7,ngx_translate_core.h,core_module.T,controls_module.N,input_module.X,hierarchy_select_component.P],styles:[parameter_create_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[fesm2022_forms.ok,dialog.CP,Object])],NgmParameterCreateComponent)}}]);